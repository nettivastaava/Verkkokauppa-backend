{"version":3,"sources":["queries.js","components/Product.js","components/Products.js","components/LoginForm.js","components/RegistrationForm.js","components/ShoppingCart.js","components/Notification.js","components/UserPage.js","components/Menu.js","logos/new_logo.png","App.js","config/mocks.js","config/provider.js","index.js"],"names":["ALL_PRODUCTS","gql","LOGIN","ALL_CATEGORIES","ME","CREATE_USER","DECREASE_QUANTITY","ADD_COMMENT","ADD_TO_CART","REMOVE_FROM_CART","CHECKOUT","REMOVE_COMMENT","CHANGE_PASSWORD","Product","shownProduct","addToCart","setError","useState","content","setContent","comments","setComments","grade","setGrade","userData","useQuery","allowReview","setAllowReview","user","setUser","noCommentsYet","setNoCommentsYet","commentsVisible","setCommentsVisible","useMutation","refetchQueries","query","onError","error","createReview","removeReview","useEffect","localStorage","getItem","document","getElementById","length","buyButton","quantity","disabled","data","me","username","a","filter","c","loading","console","log","className","name","Table","striped","price","description","average_grade","button","Button","id","onClick","postReview","event","preventDefault","product","variables","deleteReview","window","confirm","productId","hideWhenVisible","display","showWhenVisible","style","map","Form","onSubmit","type","Label","min","max","size","value","onChange","target","parseInt","cols","rows","Products","myCart","setMyCart","categoriesResult","useLazyQuery","getProducts","result","setCategory","categories","setCategories","products","setProducts","productsToShow","setProductsToShow","setFilter","allCategories","allProducts","match","useRouteMatch","find","p","params","showCategory","category","styles","buttonStyle","marginTop","marginBottom","marginRight","marginLeft","path","filteredProducts","filterByGrade","toLowerCase","includes","href","LoginForm","setToken","setNotification","setUsername","password","setPassword","history","useHistory","setTimeout","login","token","setItem","push","location","reload","submit","Group","Control","RegistrationForm","passwordConf","setPasswordConf","createUser","required","minLength","maxLength","ShoppingCart","shoppingCart","setShoppingCart","removeFromCart","checkout","cart","total","item","amount","toFixed","checkoutFunc","i","productName","productToBeRemoved","removeProductFromCart","Notification","message","UserPage","oldPassword","setOldPassword","newPassword","setNewPassword","confirmNew","setConfirmNew","changePassword","Menu","logout","padding","paddingRight","App","setErrorMessage","notification","notify","client","useApolloClient","title","Image","src","image","clear","resetStore","productToBeAdded","mocks","request","_typename","units_sold","addComment","ENV","process","REACT_APP_ENV","authLink","setContext","_","headers","authorization","httpLink","HttpLink","uri","ApolloClient","cache","InMemoryCache","link","concat","Provider","children","defaultOptions","watchQuery","fetchPolicy","ReactDOM","render"],"mappings":"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","file":"static/js/main.1e4c6ab7.chunk.js","sourcesContent":["import { gql } from '@apollo/client'\n\nexport const ALL_PRODUCTS = gql`\n  query allProductsByCategory($category: String){\n    allProducts(category: $category) {\n      name\n      price\n      quantity\n      id\n      categories\n      description\n      comments {\n        id\n        user\n        product\n        content\n        grade\n      }\n      units_sold\n      average_grade\n    }\n  }\n  `\nexport const LOGIN = gql`\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      value\n    }\n  }\n`\n\nexport const ALL_CATEGORIES = gql`\nquery {\n  allCategories\n}\n`\nexport const ME = gql`\n  query {\n    me {\n      username\n      id\n      cart {\n        productName\n        amount\n        price\n      }\n    }\n  }\n  `\n\nexport const CREATE_USER = gql`\n  mutation createUser($username: String!, $password: String!, $passwordConf: String!) {\n    createUser(username: $username, password: $password, passwordConf: $passwordConf) {\n      username\n    }\n  }\n`\n\nexport const DECREASE_QUANTITY = gql`\n  mutation decreaseQuantity($name: String!, $quantity: Int!) {\n    decreaseQuantity(name: $name, quantity: $quantity) {\n      name\n      quantity\n    }\n  }\n`\n\nexport const FIND_PRODUCT = gql`\n  query findProduct($name: String!) {\n    findProduct(name: $name) {\n      name\n      price\n      quantity\n      average_grade\n    }\n  }\n`\n\nexport const ADD_COMMENT = gql`\n  mutation addComment($user: String!, $product: String!, $content: String! $grade: Int!) {\n    addComment(user: $user, product: $product, content: $content, grade: $grade) {\n      user\n      product\n      content\n      grade\n    }\n  }\n`\n\nexport const ALL_COMMENTS = gql`\n  query allCommentsByProduct($product: String){\n    allComments(product: $product) {\n      user\n      product\n      content\n    }\n  }\n`\n\nexport const ADD_TO_CART = gql`\n  mutation addToCart($productName: String!, $price: Float!) {\n    addToCart(productName: $productName, price: $price) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`\n\nexport const REMOVE_FROM_CART = gql`\n  mutation removeFromCart($productName: String!) {\n    removeFromCart(productName: $productName) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`\n\nexport const TOTAL_PRICE = gql`\n  query {\n    totalPrice\n  }\n`\n\nexport const CHECKOUT = gql`\n  mutation {\n    checkout {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`\n\nexport const REMOVE_COMMENT = gql`\n  mutation removeComment($productId: String!) {\n    removeComment(productId: $productId) {\n      name\n      id\n    }\n  }\n`\n\nexport const CHANGE_PASSWORD = gql`\n  mutation changePassword($oldPassword: String!, $newPassword: String!, $confirmNew: String!) {\n    changePassword(oldPassword: $oldPassword, newPassword: $newPassword, confirmNew: $confirmNew) {\n      username\n    }\n  }\n`","import React, { useState, useEffect } from 'react'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { ME, ALL_PRODUCTS, ADD_COMMENT, REMOVE_COMMENT } from '../queries'\nimport { checkDocument } from '@apollo/client/utilities'\nimport { useRouteMatch } from 'react-router'\nimport { Table, Form, Button } from 'react-bootstrap'\n\nconst Product = ({ shownProduct, addToCart, setError }) => {\n  const [content, setContent] = useState('')\n  const [comments, setComments] = useState([])\n  const [grade, setGrade] = useState(null)\n  const userData = useQuery(ME)\n  const [allowReview, setAllowReview] = useState(true)\n  const [user, setUser] = useState(null)\n  const [noCommentsYet, setNoCommentsYet] = useState(true)\n  const [commentsVisible, setCommentsVisible] = useState(true)\n  const [ createReview, result ] = useMutation(ADD_COMMENT, {  \n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n  const [ removeReview, removeResult ] = useMutation(REMOVE_COMMENT, {\n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n  useEffect(() => {\n    if (!shownProduct || !localStorage.getItem('shop-user-token') || !document.getElementById('buy-button')) {\n      return\n    }\n    \n    setComments(shownProduct.comments) \n\n    if (comments.length > 0) {\n      setNoCommentsYet(false)\n    } else {\n      setNoCommentsYet(true)\n    }\n\n    const buyButton =  document.getElementById('buy-button')\n\n    if (shownProduct.quantity < 1) {\n      buyButton.disabled = true\n    } else {\n      buyButton.disabled = false\n    }\n    \n  })\n\n  useEffect(() => {    \n    if (userData.data && userData.data.me) {    \n      setUser(userData.data.me.username)  \n    }  \n  }, [userData])\n\n  useEffect( async () => {\n    if (userData.data && userData.data.me && shownProduct) {\n      let reviewCheck =  await comments.filter(c => c.user === userData.data.me.username)  \n  \n      if (reviewCheck.length > 0) {\n        setAllowReview(false)\n      } else {\n        setAllowReview(true)\n      }\n    }\n  })\n\n  if (userData.loading) {\n    return (\n      <div>loading...</div>\n    )\n  }\n\n  if (!shownProduct) {\n    return null\n  }\n\n  console.log('tuote ', shownProduct)\n  console.log('kom', comments.length)\n\n  if (!localStorage.getItem('shop-user-token')) {\n    return (\n      <div>\n        <h2 className=\"midHeader\">{shownProduct.name}</h2>\n        <Table striped>\n          <tbody>\n            <tr>\n              <th>\n                price\n              </th>\n              <th>\n                description\n              </th>\n              <th>\n                quantity\n              </th>\n              <th>\n                average grade\n              </th>\n            </tr>\n            <tr>\n              <td>${shownProduct.price}</td>\n              <td>{shownProduct.description}</td>\n              <td>{shownProduct.quantity}</td>\n              <td>{shownProduct.average_grade}</td>\n            </tr>\n          </tbody>\n        </Table>\n        Log in to see the reviews for this product\n      </div>\n    )\n  }\n  const button = <Button className=\"generalButton\" id='buy-button' onClick={() => addToCart(shownProduct)}>add to cart</Button>\n\n  const postReview = async (event) => {\n    event.preventDefault()\n\n    const product = shownProduct.id\n    createReview({ variables: { user, product, content, grade } })\n    setContent('')\n    setGrade(null)\n  }\n\n  const deleteReview = async (event) => {\n    if (window.confirm(`Confirm to delete your review`)) {\n      event.preventDefault()\n\n      const productId = shownProduct.id\n      removeReview({ variables: { productId } })\n    }\n  }\n\n  const deleteButton = () => (\n    <Form onSubmit={deleteReview}>\n      <div>\n        <Button type=\"submit\" className=\"generalButton\">delete your review</Button>\n      </div>\n    </Form>\n  )\n\n  const reviewForm = () => (\n    <Form onSubmit={postReview}>\n      <h3>Review this product</h3>\n      <Form.Label>Grade (1-5): </Form.Label>\n      <input \n        id='grade'         \n        type='number'\n        min='1'\n        max='5'\n        size= '1'\n        value={grade}\n        onChange={({ target }) => setGrade(parseInt(target.value))}\n      />\n      <br></br>\n      <textarea value={content} id=\"commentField\" onChange={({ target }) => setContent(target.value)} className=\"text\" cols=\"50\" rows =\"5\"></textarea>\n      <div>\n        <Button className=\"generalButton\" id=\"submitReview\" type='submit'>Review this product</Button>\n      </div>\n    </Form>\n  )\n\n  const noCommentsText = () => (\n    <div>This item has not been reviewed yet</div>\n  )\n\n  const commentSection = () => (\n    <div>\n       <div style={hideWhenVisible}>\n        <Button className=\"generalButton\" id='visibilityButton' onClick={() => setCommentsVisible(true)}>show comments</Button>\n      </div>\n      <div style={showWhenVisible}>\n        <Button className=\"generalButton\" onClick={() => setCommentsVisible(false)}>hide comments</Button>\n        {comments.map(c =>\n          <div key={c.id}>\n            <div>\n              <b>{c.user}</b> gave grade <b>{c.grade}</b> and commented:\n            </div>\n            <div className=\"review\">\n              {c.content}\n            </div>\n            <div>\n              {userData.data.me.username === c.user && deleteButton()}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n\n  const hideWhenVisible = { display: commentsVisible ? 'none' : '' }\n  const showWhenVisible = { display: commentsVisible ? '' : 'none' }\n\n  return (\n    <div>\n      <h2 className=\"midHeader\">{shownProduct.name}</h2>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th>\n              price\n            </th>\n            <th>\n              description\n            </th>\n            <th>\n              quantity\n            </th>\n            <th>\n              average grade\n            </th>\n            <th></th>\n          </tr>\n          <tr>\n            <td>${shownProduct.price}</td>\n            <td>{shownProduct.description}</td>\n            <td>{shownProduct.quantity}</td>\n            <td>{shownProduct.average_grade}</td>\n            <td>{button}</td>\n          </tr>\n        </tbody>\n      </Table>\n      {noCommentsYet === true && noCommentsText()}\n      {noCommentsYet === false && commentSection()}\n      {allowReview !== false && reviewForm()}\n    </div>\n  )\n}\n\nexport default Product","import React, { useState, useEffect } from 'react'\nimport { useQuery, useLazyQuery } from '@apollo/client'\nimport { ALL_PRODUCTS, ALL_CATEGORIES, ME } from '../queries'\nimport Product from './Product'\nimport { Switch, Route, useRouteMatch } from 'react-router'\nimport { Table, Button } from 'react-bootstrap'\n\nconst Products = ({ myCart, setMyCart, addToCart, setError }) => {\n  const categoriesResult = useQuery(ALL_CATEGORIES)\n  const [getProducts, result] = useLazyQuery(ALL_PRODUCTS)\n  const [category, setCategory] = useState('')\n  const [categories, setCategories] = useState([])\n  const [products, setProducts] = useState([])\n  const [productsToShow, setProductsToShow] = useState([])\n  const [filter, setFilter] = useState('')\n  \n  useEffect(() => {\n    if (categoriesResult.data) {\n      setCategories(categoriesResult.data.allCategories)\n      getProducts()\n    }\n  }, [categoriesResult, getProducts])\n\n  useEffect(() => {    \n    if (result.data) {      \n      setProducts(result.data.allProducts) \n      setProductsToShow(result.data.allProducts)  \n    }  \n  }, [result])\n\n  const match = useRouteMatch('/products/:id')   \n  const product = match    \n    ? products.find(p => p.id === match.params.id)    \n    : null\n\n  if (categoriesResult.loading || result.loading) {\n    return <div>loading...</div>\n  }\n\n  const showCategory = (category) => {    \n    getProducts({ variables: { category: category } })  \n    \n    if (!category) {\n      setCategory('')\n    } else {\n      setCategory(category)\n    }\n  }\n\n  const filterByGrade = (grade) => {\n    const filteredProducts = products.filter(product => product.average_grade >= grade)\n    setProductsToShow(filteredProducts)\n  }\n\n  const styles = {\n    buttonStyle: {\n        marginTop: \"3px\",\n        marginBottom: \"5px\",\n        marginRight: \"10px\",\n        marginLeft: \"10px\"\n    }\n  }\n  \n  return (\n    <div className=\"bottomPadding\">\n      <Switch>\n        <Route path= \"/products/:id\">\n          <Product\n            shownProduct={product}\n            myCart={myCart}\n            setMyCart={setMyCart}\n            addToCart={addToCart}\n            setError={setError}\n          />\n        </Route>\n      </Switch>\n      <h2 className=\"midHeader\">Search products by category</h2>\n      \n      <div className=\"navBar\">\n        {categories.map(c => \n          <Button className=\"categoryButton\"style={styles.buttonStyle} onClick={() => showCategory(c)}>{c}</Button>\n        )}\n        <Button className=\"categoryButton\" style={styles.buttonStyle} onClick={() => showCategory('')}>trending</Button>\n      </div>\n      <div>\n        <div className=\"float-child\">\n          Search product by name:\n          <input \n            type='text'\n            min='1'\n            max='48'\n            onChange={({ target }) => setFilter(target.value)}\n          />\n        </div>\n        <div className=\"float-child\">\n          Show products with grade at least \n          <input \n            type='number'\n            min='1'\n            max='5'\n            size= '2'\n            onChange={({ target }) => filterByGrade(target.value)}\n          /> \n        </div>\n      </div>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              price\n            </th>\n            <th>\n              quantity\n            </th>\n          </tr>\n          {productsToShow.filter(product => product.name.toLowerCase().includes(filter.toLowerCase())).map(p =>\n            <tr key={p.name}>\n              <td><a className=\"textLink\" id={p.id} href={`/products/${p.id}`} >{p.name}</a></td>\n              <td>${p.price}</td>\n              <td>{p.quantity}</td>\n            </tr>\n          )}\n        </tbody>\n      </Table>\n    </div>\n  )\n}\n\nexport default Products","import React, { useState, useEffect } from 'react'\nimport { useMutation, useQuery, useLazyQuery, from } from '@apollo/client'\nimport { LOGIN, ME } from '../queries'\nimport {\n  useHistory\n} from \"react-router-dom\"\nimport { Form, Button } from 'react-bootstrap'\n\nconst LoginForm = ({ setToken, setNotification }) => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const history = useHistory()\n  const [ login, result ] = useMutation(LOGIN, {\n    refetchQueries: [ { query: ME } ],  \n    onError: (error) => {\n      setNotification('Invalid credentials')\n      setTimeout(() => {\n        setNotification('')\n      }, 10000)\n    },\n  })\n\n  useEffect(() => { \n    if ( result.data ) {\n      const token = result.data.login.value\n      setToken(token)\n      localStorage.setItem('shop-user-token', token)\n      localStorage.setItem('username', username)\n      history.push('/')\n      window.location.reload()\n    }  \n  }, [result.data]) \n\n  const submit = async (event) => {\n    event.preventDefault()\n\n    login({ variables: { username, password } })\n  }\n\n  return (\n    <div className=\"bottomPadding\">\n      <h2>Login</h2>\n      <Form onSubmit={submit}>\n        <Form.Group>\n          <Form.Label>username:</Form.Label>\n          <Form.Control\n            className=\"textField\"\n            id='username'\n            type='text'\n            value={username}\n            onChange={({ target }) => setUsername(target.value)}\n          />\n          <Form.Label>password:</Form.Label>\n          <Form.Control  \n            className=\"textField\"\n            id='password'         \n            type='password'\n            value={password}\n            onChange={({ target }) => setPassword(target.value)}\n          />\n          <Button className=\"generalButton\" id='login-button' type='submit'>login</Button>\n        </Form.Group>\n      </Form>\n      <p>New user? Register <a id='register-link'href='/register'>here</a></p>\n    </div>\n  )\n}\n\nexport default LoginForm","import React, { useState, useEffect } from 'react'\nimport { from, useMutation } from '@apollo/client'\nimport { CREATE_USER } from '../queries'\nimport {\n  useHistory\n} from \"react-router-dom\"\nimport { Form, Button } from 'react-bootstrap'\n\nconst RegistrationForm = ({ setNotification }) => {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [passwordConf, setPasswordConf] = useState('')\n    const history = useHistory()\n\n    const [ createUser, result ] = useMutation(CREATE_USER, {  \n        onError: (error) => {\n          setNotification('Registration failed')\n          setTimeout(() => {\n            setNotification('')\n          }, 10000)\n        },\n    })\n\n    useEffect(() => { \n      if ( result.data ) {\n        setUsername('')\n        setPassword('')\n        setPasswordConf('')\n\n        history.push('/login')\n      }  \n    }, [result.data]) \n\n    const submit = async (event) => {\n        event.preventDefault()\n    \n        createUser({ variables: { username, password, passwordConf } })\n    }\n\n    return (\n      <div className=\"bottomPadding\">\n        <h2>Create a new account</h2>\n        <Form onSubmit={submit}>\n          <Form.Group>\n            <Form.Label>username:</Form.Label>\n            <Form.Control\n              className=\"textField\"\n              id='username'\n              required\n              minLength='3'\n              maxLength='16'\n              type='text'\n              value={username}\n              onChange={({ target }) => setUsername(target.value)}\n            />\n            <Form.Label>password:</Form.Label>\n            <Form.Control\n              className=\"textField\"\n              id='password'\n              required\n              minLength='8'\n              maxLength='32'\n              type='password'\n              value={password}\n              onChange={({ target }) => setPassword(target.value)}\n            />\n            <Form.Label>password confirmation:</Form.Label>\n            <Form.Control\n              className=\"textField\"\n              id='passwordConf'\n              required\n              minLength='8'\n              maxLength='32'\n              type='password'\n              value={passwordConf}\n              onChange={({ target }) => setPasswordConf(target.value)}\n            />\n          <Button className=\"generalButton\" id='register-button' type='submit'>register</Button>\n          </Form.Group>\n        </Form>\n      </div>\n    )   \n}\n\nexport default RegistrationForm","import React, { useState, useEffect } from 'react'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { REMOVE_FROM_CART, CHECKOUT, ME } from '../queries'\nimport { Form, Button, Table } from 'react-bootstrap'\n\nconst ShoppingCart = ({ user, setNotification, setError }) => {\n  const [shoppingCart, setShoppingCart] = useState([])\n  const [ removeFromCart, removeResult ] = useMutation(REMOVE_FROM_CART, {\n    refetchQueries: [ { query: ME } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n  const [ checkout, checkoutResult ] = useMutation(CHECKOUT, {\n    refetchQueries: [ { query: ME } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n\n  useEffect(() => {\n    setShoppingCart(user.cart)\n  })\n\n  if (shoppingCart < 1) {\n    return (\n      <div className=\"bottomPadding\">\n        <h2>Your shopping cart</h2>\n        Your shopping cart is currently empty.\n      </div>\n    )\n  }\n\n  var total = 0\n  shoppingCart.map(item => total += item.price * item.amount)\n  total = total.toFixed(2)\n\n  const removeProductFromCart = (productToBeRemoved) => {\n    const productName = productToBeRemoved.productName\n    removeFromCart({ variables: { productName }})\n    setNotification(`Removed ${productName} from cart`)\n      setTimeout(() => {\n        setNotification('')\n      }, 5000) \n\n    total =-productToBeRemoved.price\n  }\n\n  const checkoutFunc = async () => {\n    if (window.confirm(`Confirm your purchase of $${total}`)) {\n      for (var i = 0; i < shoppingCart.length; i++) {\n      checkout()\n      setNotification(`Your purchase was successful`)\n        setTimeout(() => {\n          setNotification('')\n        }, 5000)\n      }\n    }\n  }\n  \n  return(\n    <div className=\"bottomPadding\">\n      <h2>Your shopping cart</h2>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              price per unit\n            </th>\n            <th>\n              amount\n            </th>\n            <th></th>\n          </tr>\n          {shoppingCart.map(p =>\n            <tr key={p.product}>\n              <td>{p.productName}</td>\n              <td>${p.price}</td>\n              <td>{p.amount}</td>\n              <td><Button className=\"generalButton\" onClick={() => removeProductFromCart(p)}>remove</Button></td>\n            </tr>\n          )}\n          <tr>\n            <th>grand total:</th>\n            <th>${total}</th>\n          </tr>\n        </tbody>\n      </Table>\n      <Button className=\"generalButton\" onClick={() => checkoutFunc()}>checkout</Button>\n    </div>\n  )\n}\n\n\nexport default ShoppingCart","import React from 'react'\n\nconst Notification = ({message}) => {\n\n  if (message === '') {\n    return null\n  } else if (message.match('^Added') || message.match('^Your purchase was successful') || message.match('^Password updated')) {\n    return <div className='addProd'>{message}</div>\n  } else if (message.match('^Removed') || message.match('^Make') || message.match('^Invalid')) {\n      return <div className='removeProd'>{message}</div>\n  } else {\n      return <div className='removeProd'>{message}</div>\n  }\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport { CHANGE_PASSWORD, ME } from '../queries'\nimport { Table, Form, Button } from 'react-bootstrap'\nimport { useQuery, useMutation } from '@apollo/client'\n\nconst UserPage = ({ setNotification }) => {\n  const [oldPassword, setOldPassword] = useState('')\n  const [newPassword, setNewPassword] = useState('')\n  const [confirmNew, setConfirmNew] = useState('')\n  const [changePassword, result] = useMutation(CHANGE_PASSWORD, {\n    refetchQueries: [ { query: ME } ],  \n    onError: (error) => {\n      setNotification('Invalid input')\n      setTimeout(() => {\n        setNotification('')\n      }, 10000)\n    },\n  })\n\n  useEffect(() => {\n    if (result.data) {\n      setOldPassword('')\n      setNewPassword('')\n      setConfirmNew('')\n\n      setNotification('Password updated successfully')\n      setTimeout(() => {\n        setNotification('')\n      }, 10000)\n    }\n  }, [result.data])\n\n  const submit = (event) => {\n    event.preventDefault()\n\n    changePassword({ variables: { oldPassword, newPassword, confirmNew } })\n  }\n\n  if (result.loading) {\n    return (\n      <div>loading...</div>\n    )\n  }\n \n  return (\n    <div>\n      <h2>User settings</h2>\n      <Form onSubmit={submit}>\n        <Form.Group>\n          <Form.Label>Old password:</Form.Label>\n          <Form.Control\n            className=\"textField\"\n            id='oldPassword'         \n            type='password'\n            value={oldPassword}\n            onChange={({ target }) => setOldPassword(target.value)}\n          />\n          <Form.Label>New password:</Form.Label>\n          <Form.Control\n            className=\"textField\"\n            id='newPassword'         \n            type='password'\n            value={newPassword}\n            onChange={({ target }) => setNewPassword(target.value)}\n          />\n          <Form.Label>Confirm new password:</Form.Label>\n          <Form.Control\n            className=\"textField\"\n            id='confirmNew'         \n            type='password'\n            value={confirmNew}\n            onChange={({ target }) => setConfirmNew(target.value)}\n          />\n          <Button className=\"generalButton\" id='change-button' type='submit'>submit</Button>\n        </Form.Group>\n      </Form>\n    </div>\n  )\n}\n\nexport default UserPage","import React from 'react'\n\nconst Menu = ({ logout }) => {\n  const padding = {\n    paddingRight: 5\n  }\n  \n  if (!localStorage.getItem('shop-user-token')) {\n    return(\n      <div className=\"menuBar\">\n        <a className=\"menuLink\" href='/products' id=\"products\" style={padding}>products</a>\n        <a className=\"menuLink\" href='/login' id='login' style={padding}>login</a>\n        <a className=\"menuLink\" href='/register' style={padding}>register</a>\n      </div>\n    )\n  }\n  \n  return(\n    <div className=\"menuBar\">\n      <a className=\"menuLinkLogged\" href='/products' id=\"products\" style={padding}>products</a>\n      <a className=\"menuLinkLogged\" href='/shopping-cart' id=\"cart\" style={padding}>shopping cart</a>\n      <a className=\"menuLinkLogged\" href='/settings' id=\"settings\" style={padding}>user settings</a>\n      <a className=\"menuLinkLogged\" href='/' id=\"logout\" onClick={logout}>logout</a>\n    </div>\n  )\n}\n\nexport default Menu","export default \"data:image/png;base64,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\"","import React, { useState, useEffect } from 'react'\nimport { useQuery, useApolloClient, useMutation, useLazyQuery } from '@apollo/client'\nimport Products from './components/Products'\nimport LoginForm from './components/LoginForm'\nimport RegistrationForm from './components/RegistrationForm'\nimport ShoppingCart from './components/ShoppingCart'\nimport Notification from './components/Notification'\nimport UserPage from './components/UserPage'\nimport Menu from './components/Menu'\nimport image from './logos/new_logo.png'\nimport { Image } from 'react-bootstrap'\nimport { ME, DECREASE_QUANTITY, ALL_PRODUCTS, ADD_TO_CART } from './queries'\nimport {\n  Switch, Route, Link, useRouteMatch\n} from \"react-router-dom\"\n\nconst App = () =>  {\n  const [errorMessage, setErrorMessage] = useState('')\n  const [notification, setNotification] = useState('')\n  const userData = useQuery(ME)\n  const [ decreaseQuantity, result ] = useMutation(DECREASE_QUANTITY, {\n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      notify(error)\n    },\n  })\n  const [ addToCart, addResult ] = useMutation(ADD_TO_CART, {\n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      notify(error)\n    },\n  })\n  const [token, setToken] = useState(null)\n  const client = useApolloClient()\n  const [myCart, setMyCart] = useState([])\n  document.title = 'Pennywise Web Store'\n\n  const notify = (message) => {\n    setErrorMessage(message)\n    setTimeout(() => {\n      setErrorMessage('')\n    }, 10000)\n  }\n\n  if (userData.loading) {\n    return(\n      <div>loading...</div>\n    )\n  }\n\n  const addProductToCart =  (productToBeAdded) => {\n    const productName = productToBeAdded.name\n    const price = productToBeAdded.price\n\n    addToCart({ variables: { productName, price } })\n    setNotification(`Added ${productName} to cart`)\n      setTimeout(() => {\n        setNotification('')\n      }, 5000)\n  }\n\n  const logout = () => {\n    setToken(null)\n    localStorage.clear()\n    client.resetStore()\n  }\n\n  if (!localStorage.getItem('shop-user-token')) {\n    return (\n      <div className=\"container\">\n        <div className=\"header\">\n          <Image src={image} className=\"logoDetails\"/>\n          <h1>Pennywise Web Store</h1>\n        </div>\n        <Notification message={notification} />\n        <Menu />\n        <Switch>\n          <Route path= \"/login\">\n            <LoginForm\n              setToken={setToken}\n              setNotification={setNotification}\n            />      \n          </Route>\n          <Route path= \"/register\">\n            <RegistrationForm\n              setNotification={setNotification}\n            />\n          </Route>\n          <Route path= \"/products\">\n            <Products \n            />\n          </Route>\n        </Switch>\n      </div>\n    );\n  }\n\n  return (\n      <div className=\"container\">\n        <div className=\"header\">\n          <Image src={image} className=\"logoDetails\"/>\n          <h1>Pennywise Web Store</h1>\n        </div>\n        <Notification message={notification} />\n        <Menu logout={logout}/>\n        <Switch>\n          <Route path= \"/shopping-cart\">\n            <ShoppingCart\n              user = {userData.data.me}\n              setNotification={setNotification}\n              setError={notify}\n            />\n          </Route>\n          <Route path= \"/products\">\n            <Products \n              myCart={myCart}\n              setMyCart={setMyCart}\n              addToCart={addProductToCart}\n              setError={notify}\n            />\n          </Route>\n          <Route path= \"/settings\">\n            <UserPage \n              setNotification={setNotification}\n            />\n          </Route>\n        </Switch>\n      </div>\n  );\n}\n\nexport default App;\n","import {\n  CREATE_USER, LOGIN, ME, ALL_PRODUCTS, ALL_CATEGORIES, ADD_COMMENT\n} from '../queries'\n\nconst mocks = [\n  {\n    request: {\n      query: CREATE_USER,\n      variables: {\n        username: 'Harri',\n        password: 'salainen',\n        passwordConf: 'salainen'\n      }\n    },\n    result: {\n      data: {\n        createUser: {\n          username: 'Harri',\n          password: 'salainen',\n          passwordConf: 'salainen'\n        }\n      }\n    }\n  },\n  {\n    request: {\n      query: LOGIN,\n      variables: {\n        username: 'Harri',\n        password: 'salainen',\n      }\n    },\n    result: {\n      data: {\n        login: {\n          value: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijc1NjFjNWE2LTc1NjYtNDA5Ny04NDUzLWM5MjU0NDE0ZTM5NyIsImVtYWlsIjoiaGVoZUBoZWhlLmZpIiwiaWF0IjoxNjIzNzY1NjkwLCJleHAiOjE2MjM3NjkyOTB9.WMQnhKrWbjqPxiieWsVMY4x5GA6pi91DM9zo5eo0GFY',\n        }\n      }\n    }\n  },\n  {\n    request: {\n      query: ME\n    },\n    result: {\n      data: {\n        me: {\n          username: 'Harri',\n        }\n      }\n    }\n  },\n  {\n    request: {\n      query: ALL_CATEGORIES,\n    },\n    result: {\n      data: {\n        allCategories: [\n            \"electronics\",\n            \"clothing\"\n        ]\n      }\n    },\n  },\n  {\n    request: {\n      query: ALL_PRODUCTS,\n    },\n    result: {\n      data: {\n        allProducts: [\n          {\n            _typename: \"Product\",\n            name: \"Two sizes too big, faded Taz t-shirt\",\n            price: 17.45,\n            quantity: 5,\n            units_sold: 0,\n            average_grade: null,\n            description: \"Guaranteed to be ill-fitting\",\n            comments: [],\n            categories: [ \"clothing\" ],\n            id: \"ff28rj292fkfljf92\"\n          },\n          {\n            _typename: \"Product\",\n            name: \"Color TV\",\n            price: 399.95,\n            quantity: 2,\n            units_sold: 0,\n            average_grade: null,\n            comments: [],\n            categories: [ \"electronics\" ],\n            id: \"ff28rj2929fjf92\" \n          }\n        ]\n      }\n    },\n  },\n  {\n    request: {\n      query: ADD_COMMENT,\n      variables: {\n        user: 'Harri',\n        product: 'ff28rj292fkfljf92',\n        content: 'Oli ihan liian piukka',\n        grade: 2\n      }\n    },\n    result: {\n      data: {\n        addComment: {\n          user: 'Harri',\n          product: 'ff28rj292fkfljf92',\n          content: 'Oli ihan liian piukka',\n          grade: 2\n        }\n      }\n    }\n  },\n]\n\nexport default mocks","import React from 'react'\nimport {\n  ApolloClient, ApolloProvider, HttpLink, InMemoryCache,\n} from '@apollo/client'\nimport { MockedProvider } from '@apollo/client/testing'\nimport { setContext } from 'apollo-link-context'\nimport mocks from './mocks'\n\nconst ENV = process.env.REACT_APP_ENV\n\nconst authLink = setContext((_, { headers }) => {\n  const token = localStorage.getItem('shop-user-token')\n  return {    \n    headers: {      \n      ...headers,      \n      authorization: token ? `bearer ${token}` : null,    \n    }  \n  }\n})\n\nconst httpLink = new HttpLink({ uri: '/graphql' })\n\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: authLink.concat(httpLink)\n})\n\nconst Provider = ({ children }) => {\n  if (ENV === 'test') {\n    return (\n      <MockedProvider\n        mocks={mocks}\n        defaultOptions={{\n          watchQuery: { fetchPolicy: 'no-cache' },\n          query: { fetchPolicy: 'no-cache' },\n        }}\n      >\n        <>{children}</>\n      </MockedProvider>\n    )\n  }\n\n  return (\n    <ApolloProvider client={client}>\n      <>{children}</>\n    </ApolloProvider>\n  )\n}\n\nexport default Provider","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\nimport {\n  BrowserRouter as Router,\n} from \"react-router-dom\"\nimport Provider from './config/provider'\n\nReactDOM.render(\n  <Provider>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}