(this["webpackJsonpverkkokauppa-frontend"]=this["webpackJsonpverkkokauppa-frontend"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var r,c,a,s,i,o,u,j,d,l,b,O,h,m,p=n(0),x=n(83),f=n.n(x),g=n(9),v=n(6),A=n(26),y=Object(v.gql)(r||(r=Object(A.a)(["\n  query allProductsByCategory($category: String){\n    allProducts(category: $category) {\n      name\n      price\n      quantity\n      id\n      categories\n      description\n      comments {\n        id\n        user\n        product\n        content\n        grade\n      }\n      units_sold\n      average_grade\n    }\n  }\n  "]))),N=Object(v.gql)(c||(c=Object(A.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      value\n    }\n  }\n"]))),S=Object(v.gql)(a||(a=Object(A.a)(["\nquery {\n  allCategories\n}\n"]))),k=Object(v.gql)(s||(s=Object(A.a)(["\n  query {\n    me {\n      username\n      id\n      cart {\n        productName\n        amount\n        price\n      }\n    }\n  }\n  "]))),w=Object(v.gql)(i||(i=Object(A.a)(["\n  mutation createUser($username: String!, $password: String!, $passwordConf: String!) {\n    createUser(username: $username, password: $password, passwordConf: $passwordConf) {\n      username\n    }\n  }\n"]))),C=Object(v.gql)(o||(o=Object(A.a)(["\n  mutation decreaseQuantity($name: String!, $quantity: Int!) {\n    decreaseQuantity(name: $name, quantity: $quantity) {\n      name\n      quantity\n    }\n  }\n"]))),E=(Object(v.gql)(u||(u=Object(A.a)(["\n  query findProduct($name: String!) {\n    findProduct(name: $name) {\n      name\n      price\n      quantity\n      average_grade\n    }\n  }\n"]))),Object(v.gql)(j||(j=Object(A.a)(["\n  mutation addComment($user: String!, $product: String!, $content: String! $grade: Int!) {\n    addComment(user: $user, product: $product, content: $content, grade: $grade) {\n      user\n      product\n      content\n      grade\n    }\n  }\n"])))),q=(Object(v.gql)(d||(d=Object(A.a)(["\n  query allCommentsByProduct($product: String){\n    allComments(product: $product) {\n      user\n      product\n      content\n    }\n  }\n"]))),Object(v.gql)(l||(l=Object(A.a)(["\n  mutation addToCart($productName: String!, $price: Float!) {\n    addToCart(productName: $productName, price: $price) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"])))),G=Object(v.gql)(b||(b=Object(A.a)(["\n  mutation removeFromCart($productName: String!) {\n    removeFromCart(productName: $productName) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"]))),I=(Object(v.gql)(O||(O=Object(A.a)(["\n  query {\n    totalPrice\n  }\n"]))),Object(v.gql)(h||(h=Object(A.a)(["\n  mutation {\n    checkout {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"])))),F=Object(v.gql)(m||(m=Object(A.a)(["\n  mutation removeComment($productId: String!) {\n    removeComment(productId: $productId) {\n      name\n      id\n    }\n  }\n"]))),B=n(21),L=n.n(B),M=n(35),Q=(n(3),n(110)),U=n(113),R=n(112),T=n(2),P=function(e){var t=e.shownProduct,n=e.addToCart,r=e.setError,c=Object(p.useState)(""),a=Object(g.a)(c,2),s=a[0],i=a[1],o=Object(p.useState)([]),u=Object(g.a)(o,2),j=u[0],d=u[1],l=Object(p.useState)(null),b=Object(g.a)(l,2),O=b[0],h=b[1],m=Object(v.useQuery)(k),x=Object(p.useState)(!0),f=Object(g.a)(x,2),A=f[0],N=f[1],S=Object(p.useState)(null),w=Object(g.a)(S,2),C=w[0],q=w[1],G=Object(v.useMutation)(E,{refetchQueries:[{query:y}],onError:function(e){r(e)}}),I=Object(g.a)(G,2),B=I[0],P=(I[1],Object(v.useMutation)(F,{refetchQueries:[{query:y}],onError:function(e){r(e)}})),J=Object(g.a)(P,2),D=J[0],Z=J[1];if(Object(p.useEffect)((function(){if(t&&localStorage.getItem("shop-user-token")&&document.getElementById("buy-button")){console.log("kommentit ",j),d(t.comments);var e=document.getElementById("buy-button");t.quantity<1?e.disabled=!0:e.disabled=!1}})),Object(p.useEffect)((function(){m.data&&m.data.me&&q(m.data.me.username)}),[m]),Object(p.useEffect)((function(){Z.data&&console.log("DATA ",Z)}),[Z]),Object(p.useEffect)(Object(M.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.data&&m.data.me&&t)){e.next=5;break}return e.next=3,j.filter((function(e){return e.user===m.data.me.username}));case 3:e.sent.length>0?N(!1):N(!0);case 5:case"end":return e.stop()}}),e)})))),m.loading)return Object(T.jsx)("div",{children:"loading..."});if(!t)return null;if(console.log("tuote ",t),console.log("kom",j.length),!localStorage.getItem("shop-user-token"))return Object(T.jsxs)("div",{children:[Object(T.jsx)("h2",{className:"midHeader",children:t.name}),Object(T.jsx)(Q.a,{striped:!0,children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:"price"}),Object(T.jsx)("th",{children:"description"}),Object(T.jsx)("th",{children:"quantity"}),Object(T.jsx)("th",{children:"average grade"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:t.name}),Object(T.jsxs)("td",{children:["$",t.price]}),Object(T.jsx)("td",{children:t.description}),Object(T.jsx)("td",{children:t.quantity}),Object(T.jsx)("td",{children:t.average_grade})]})]})}),"Log in to see the reviews for this product"]});var V=Object(T.jsx)(U.a,{className:"generalButton",id:"buy-button",onClick:function(){return n(t)},children:"add to cart"}),z=function(){var e=Object(M.a)(L.a.mark((function e(n){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=t.id,B({variables:{user:C,product:r,content:s,grade:O}}),i(""),h(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(M.a)(L.a.mark((function e(n){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Confirm to delete your review")&&(n.preventDefault(),r=t.id,D({variables:{productId:r}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)("h2",{className:"midHeader",children:t.name}),Object(T.jsx)(Q.a,{striped:!0,children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:"price"}),Object(T.jsx)("th",{children:"description"}),Object(T.jsx)("th",{children:"quantity"}),Object(T.jsx)("th",{children:"average grade"}),Object(T.jsx)("th",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:t.name}),Object(T.jsxs)("td",{children:["$",t.price]}),Object(T.jsx)("td",{children:t.description}),Object(T.jsx)("td",{children:t.quantity}),Object(T.jsx)("td",{children:t.average_grade}),Object(T.jsx)("td",{children:V})]})]})}),j.map((function(e){return Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{children:[e.user," gave grade ",e.grade," and commented:"]}),Object(T.jsx)("div",{className:"review",children:e.content}),Object(T.jsx)("div",{children:m.data.me.username===e.user&&Object(T.jsx)(R.a,{onSubmit:Y,children:Object(T.jsx)("div",{children:Object(T.jsx)(U.a,{type:"submit",className:"generalButton",children:"delete your review"})})})})]},e.id)})),!1!==A&&Object(T.jsxs)(R.a,{onSubmit:z,children:[Object(T.jsx)("h3",{children:"Review this product"}),Object(T.jsx)(R.a.Label,{children:"Grade (1-5): "}),Object(T.jsx)("input",{id:"grade",type:"number",min:"1",max:"5",size:"1",value:O,onChange:function(e){var t=e.target;return h(parseInt(t.value))}}),Object(T.jsx)("br",{}),Object(T.jsx)("textarea",{value:s,onChange:function(e){var t=e.target;return i(t.value)},className:"text",cols:"50",rows:"5"}),Object(T.jsx)("div",{children:Object(T.jsx)(U.a,{className:"generalButton",type:"submit",children:"Review this product"})})]})]})},J=n(15),D=function(e){var t=e.myCart,n=e.setMyCart,r=e.addToCart,c=e.setError,a=Object(v.useQuery)(S),s=Object(v.useLazyQuery)(y),i=Object(g.a)(s,2),o=i[0],u=i[1],j=Object(p.useState)(""),d=Object(g.a)(j,2),l=(d[0],d[1]),b=Object(p.useState)([]),O=Object(g.a)(b,2),h=O[0],m=O[1],x=Object(p.useState)([]),f=Object(g.a)(x,2),A=f[0],N=f[1];Object(p.useEffect)((function(){a.data&&(m(a.data.allCategories),o())}),[a,o]),Object(p.useEffect)((function(){u.data&&N(u.data.allProducts)}),[u]);var k=Object(J.g)("/products/:id"),w=k?A.find((function(e){return e.id===k.params.id})):null;if(a.loading||u.loading)return Object(T.jsx)("div",{children:"loading..."});var C=function(e){o({variables:{category:e}}),l(e||"")},E={buttonStyle:{marginTop:"3px",marginBottom:"5px",marginRight:"10px",marginLeft:"10px"}};return Object(T.jsxs)("div",{className:"bottomPadding",children:[Object(T.jsx)(J.c,{children:Object(T.jsx)(J.a,{path:"/products/:id",children:Object(T.jsx)(P,{shownProduct:w,myCart:t,setMyCart:n,addToCart:r,setError:c})})}),Object(T.jsx)("h2",{className:"midHeader",children:"Search products by category"}),Object(T.jsxs)("div",{className:"navBar",children:[h.map((function(e){return Object(T.jsx)(U.a,{className:"categoryButton",style:E.buttonStyle,onClick:function(){return C(e)},children:e})})),Object(T.jsx)(U.a,{className:"categoryButton",style:E.buttonStyle,onClick:function(){return C("")},children:"trending"})]}),Object(T.jsx)(Q.a,{striped:!0,children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:"price"}),Object(T.jsx)("th",{children:"quantity"})]}),A.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:Object(T.jsx)("a",{className:"textLink",href:"/products/".concat(e.id),children:e.name})}),Object(T.jsxs)("td",{children:["$",e.price]}),Object(T.jsx)("td",{children:e.quantity})]},e.name)}))]})})]})},Z=function(e){var t=e.setToken,n=e.setNotification,r=Object(p.useState)(""),c=Object(g.a)(r,2),a=c[0],s=c[1],i=Object(p.useState)(""),o=Object(g.a)(i,2),u=o[0],j=o[1],d=Object(J.f)(),l=Object(v.useMutation)(N,{refetchQueries:[{query:k}],onError:function(e){n("Invalid credentials"),setTimeout((function(){n("")}),1e4)}}),b=Object(g.a)(l,2),O=b[0],h=b[1];Object(p.useEffect)((function(){if(h.data){var e=h.data.login.value;t(e),localStorage.setItem("shop-user-token",e),localStorage.setItem("username",a),d.push("/"),window.location.reload()}}),[h.data]);var m=function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),O({variables:{username:a,password:u}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{className:"bottomPadding",children:[Object(T.jsx)("h2",{children:"Login"}),Object(T.jsx)(R.a,{onSubmit:m,children:Object(T.jsxs)(R.a.Group,{children:[Object(T.jsx)(R.a.Label,{children:"username:"}),Object(T.jsx)(R.a.Control,{id:"username",type:"text",value:a,onChange:function(e){var t=e.target;return s(t.value)}}),Object(T.jsx)(R.a.Label,{children:"password:"}),Object(T.jsx)(R.a.Control,{id:"password",type:"password",value:u,onChange:function(e){var t=e.target;return j(t.value)}}),Object(T.jsx)(U.a,{className:"generalButton",id:"login-button",type:"submit",children:"login"})]})}),Object(T.jsxs)("p",{children:["New user? Register ",Object(T.jsx)("a",{id:"register-link",href:"/register",children:"here"})]})]})},V=function(e){var t=e.setNotification,n=Object(p.useState)(""),r=Object(g.a)(n,2),c=r[0],a=r[1],s=Object(p.useState)(""),i=Object(g.a)(s,2),o=i[0],u=i[1],j=Object(p.useState)(""),d=Object(g.a)(j,2),l=d[0],b=d[1],O=Object(J.f)(),h=Object(v.useMutation)(w,{onError:function(e){t("Registration failed"),setTimeout((function(){t("")}),1e4)}}),m=Object(g.a)(h,2),x=m[0],f=m[1];Object(p.useEffect)((function(){f.data&&(a(""),u(""),b(""),O.push("/login"))}),[f.data]);var A=function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x({variables:{username:c,password:o,passwordConf:l}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{className:"bottomPadding",children:[Object(T.jsx)("h2",{children:"Create a new account"}),Object(T.jsx)(R.a,{onSubmit:A,children:Object(T.jsxs)(R.a.Group,{children:[Object(T.jsx)(R.a.Label,{children:"username:"}),Object(T.jsx)(R.a.Control,{id:"username",required:!0,minLength:"3",maxLength:"16",type:"text",value:c,onChange:function(e){var t=e.target;return a(t.value)}}),Object(T.jsx)(R.a.Label,{children:"password:"}),Object(T.jsx)(R.a.Control,{id:"password",required:!0,minLength:"8",maxLength:"32",type:"password",value:o,onChange:function(e){var t=e.target;return u(t.value)}}),Object(T.jsx)(R.a.Label,{children:"password confirmation:"}),Object(T.jsx)(R.a.Control,{id:"passwordConf",required:!0,minLength:"8",maxLength:"32",type:"password",value:l,onChange:function(e){var t=e.target;return b(t.value)}}),Object(T.jsx)(U.a,{className:"generalButton",id:"register-button",type:"submit",children:"register"})]})})]})},z=function(e){var t=e.user,n=e.setNotification,r=e.setError,c=Object(p.useState)([]),a=Object(g.a)(c,2),s=a[0],i=a[1],o=Object(v.useMutation)(G,{refetchQueries:[{query:k}],onError:function(e){r(e)}}),u=Object(g.a)(o,2),j=u[0],d=(u[1],Object(v.useMutation)(I,{refetchQueries:[{query:k}],onError:function(e){r(e)}})),l=Object(g.a)(d,2),b=l[0];l[1];if(Object(p.useEffect)((function(){i(t.cart)})),s<1)return Object(T.jsxs)("div",{className:"bottomPadding",children:[Object(T.jsx)("h2",{children:"Your shopping cart"}),"Your shopping cart is currently empty."]});var O=0;s.map((function(e){return O+=e.price*e.amount})),O=O.toFixed(2);var h=function(){var e=Object(M.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Confirm your purchase of $".concat(O)))for(t=0;t<s.length;t++)b(),n("Your purchase was successful"),setTimeout((function(){n("")}),5e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{className:"bottomPadding",children:[Object(T.jsx)("h2",{children:"Your shopping cart"}),Object(T.jsx)(Q.a,{striped:!0,children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:"price per unit"}),Object(T.jsx)("th",{children:"amount"}),Object(T.jsx)("th",{})]}),s.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.productName}),Object(T.jsxs)("td",{children:["$",e.price]}),Object(T.jsx)("td",{children:e.amount}),Object(T.jsx)("td",{children:Object(T.jsx)("button",{onClick:function(){return function(e){var t=e.productName;j({variables:{productName:t}}),n("Removed ".concat(t," from cart")),setTimeout((function(){n("")}),5e3),O=-e.price}(e)},children:"remove"})})]},e.product)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"grand total:"}),Object(T.jsxs)("th",{children:["$",O]})]})]})}),Object(T.jsx)("button",{onClick:function(){return h()},children:"checkout"})]})},Y=function(e){var t=e.message;return console.log(t),""===t?null:t.match("^Added")||t.match("^Your purchase was successful")?Object(T.jsx)("div",{className:"addProd",children:t}):(t.match("^Removed")||t.match("^Make")||t.match("^Invalid"),Object(T.jsx)("div",{className:"removeProd",children:t}))},K=function(e){var t=e.logout,n={paddingRight:5};return localStorage.getItem("shop-user-token")?Object(T.jsxs)("div",{className:"menuBar",children:[Object(T.jsx)("a",{className:"menuLink",href:"/products",style:n,children:"products"}),Object(T.jsx)("a",{className:"menuLink",href:"/shopping-cart",style:n,children:"shopping cart"}),Object(T.jsx)("a",{className:"menuLink",href:"/",onClick:t,children:"logout"})]}):Object(T.jsxs)("div",{className:"menuBar",children:[Object(T.jsx)("a",{className:"menuLink",href:"/products",style:n,children:"products"}),Object(T.jsx)("a",{className:"menuLink",href:"/login",id:"login",style:n,children:"login"}),Object(T.jsx)("a",{className:"menuLink",href:"/register",style:n,children:"register"})]})},W="data:image/png;base64,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",H=n(111),X=function(){var e=Object(p.useState)(""),t=Object(g.a)(e,2),n=(t[0],t[1]),r=Object(p.useState)(""),c=Object(g.a)(r,2),a=c[0],s=c[1],i=Object(v.useQuery)(k),o=Object(v.useMutation)(C,{refetchQueries:[{query:y}],onError:function(e){S(e)}}),u=Object(g.a)(o,2),j=(u[0],u[1],Object(v.useMutation)(q,{refetchQueries:[{query:y}],onError:function(e){S(e)}})),d=Object(g.a)(j,2),l=d[0],b=(d[1],Object(p.useState)(null)),O=Object(g.a)(b,2),h=(O[0],O[1]),m=Object(v.useApolloClient)(),x=Object(p.useState)([]),f=Object(g.a)(x,2),A=f[0],N=f[1];Object(p.useEffect)((function(){document.title="Pennywise Web Store"}),[]);var S=function(e){n(e),setTimeout((function(){n("")}),1e4)};if(i.loading)return Object(T.jsx)("div",{children:"loading..."});return localStorage.getItem("shop-user-token")?Object(T.jsxs)("div",{className:"container",children:[Object(T.jsxs)("div",{className:"header",children:[Object(T.jsx)(H.a,{src:W,className:"logoDetails"}),Object(T.jsx)("h1",{children:"Pennywise Web Store"})]}),Object(T.jsx)(Y,{message:a}),Object(T.jsx)(K,{logout:function(){h(null),localStorage.clear(),m.resetStore()}}),Object(T.jsxs)(J.c,{children:[Object(T.jsx)(J.a,{path:"/shopping-cart",children:Object(T.jsx)(z,{user:i.data.me,setNotification:s,setError:S})}),Object(T.jsx)(J.a,{path:"/products",children:Object(T.jsx)(D,{myCart:A,setMyCart:N,addToCart:function(e){var t=e.name,n=e.price;console.log("prod ",t),l({variables:{productName:t,price:n}}),s("Added ".concat(t," to cart")),setTimeout((function(){s("")}),5e3)},setError:S})})]})]}):Object(T.jsxs)("div",{className:"container",children:[Object(T.jsxs)("div",{className:"header",children:[Object(T.jsx)(H.a,{src:W,className:"logoDetails"}),Object(T.jsx)("h1",{children:"Pennywise Web Store"})]}),Object(T.jsx)(Y,{message:a}),Object(T.jsx)(K,{}),Object(T.jsxs)(J.c,{children:[Object(T.jsx)(J.a,{path:"/login",children:Object(T.jsx)(Z,{setToken:h,setNotification:s})}),Object(T.jsx)(J.a,{path:"/register",children:Object(T.jsx)(V,{setNotification:s})}),Object(T.jsx)(J.a,{path:"/products",children:Object(T.jsx)(D,{})})]})]})},$=(n(107),n(46)),_=n(67),ee=n(86),te=n(87),ne=[{request:{query:w,variables:{username:"Harri",password:"salainen",passwordConf:"salainen"}},result:{data:{createUser:{username:"Harri",password:"salainen",passwordConf:"salainen"}}}},{request:{query:N,variables:{username:"Harri",password:"salainen"}},result:{data:{login:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijc1NjFjNWE2LTc1NjYtNDA5Ny04NDUzLWM5MjU0NDE0ZTM5NyIsImVtYWlsIjoiaGVoZUBoZWhlLmZpIiwiaWF0IjoxNjIzNzY1NjkwLCJleHAiOjE2MjM3NjkyOTB9.WMQnhKrWbjqPxiieWsVMY4x5GA6pi91DM9zo5eo0GFY"}}}},{request:{query:k},result:{data:{me:{username:"Harri"}}}}],re=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENV,ce=Object(te.a)((function(e,t){var n=t.headers,r=localStorage.getItem("shop-user-token");return{headers:Object(_.a)(Object(_.a)({},n),{},{authorization:r?"bearer ".concat(r):null})}})),ae=new v.HttpLink({uri:"/graphql"}),se=new v.ApolloClient({cache:new v.InMemoryCache,link:ce.concat(ae)}),ie=function(e){var t=e.children;return"test"===re?Object(T.jsx)(ee.a,{mocks:ne,defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}},children:Object(T.jsx)(T.Fragment,{children:t})}):Object(T.jsx)(v.ApolloProvider,{client:se,children:Object(T.jsx)(T.Fragment,{children:t})})};f.a.render(Object(T.jsx)(ie,{children:Object(T.jsx)($.a,{children:Object(T.jsx)(X,{})})}),document.getElementById("root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.8d134769.chunk.js.map