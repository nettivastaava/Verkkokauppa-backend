{"version":3,"sources":["queries.js","components/Product.js","components/Products.js","components/LoginForm.js","components/RegistrationForm.js","components/ShoppingCart.js","components/Notification.js","components/Menu.js","logos/new_logo.png","App.js","config/mocks.js","config/provider.js","index.js"],"names":["ALL_PRODUCTS","gql","LOGIN","ALL_CATEGORIES","ME","CREATE_USER","DECREASE_QUANTITY","ADD_COMMENT","ADD_TO_CART","REMOVE_FROM_CART","CHECKOUT","REMOVE_COMMENT","Product","shownProduct","addToCart","setError","useState","content","setContent","comments","setComments","grade","setGrade","userData","useQuery","allowReview","setAllowReview","user","setUser","useMutation","refetchQueries","query","onError","error","createReview","removeReview","removeResult","useEffect","localStorage","getItem","document","getElementById","console","log","buyButton","quantity","disabled","data","me","username","a","filter","c","length","loading","className","name","Table","striped","price","description","average_grade","button","Button","id","onClick","postReview","event","preventDefault","product","variables","deleteReview","window","confirm","productId","map","Form","onSubmit","type","Label","min","max","size","value","onChange","target","parseInt","cols","rows","Products","myCart","setMyCart","categoriesResult","useLazyQuery","getProducts","result","setCategory","categories","setCategories","products","setProducts","allCategories","allProducts","match","useRouteMatch","find","p","params","showCategory","category","styles","buttonStyle","marginTop","marginBottom","marginRight","marginLeft","path","style","href","LoginForm","setToken","setNotification","setUsername","password","setPassword","history","useHistory","setTimeout","login","token","setItem","push","location","reload","submit","Group","Control","RegistrationForm","passwordConf","setPasswordConf","createUser","required","minLength","maxLength","ShoppingCart","shoppingCart","setShoppingCart","removeFromCart","checkout","cart","total","item","amount","toFixed","checkoutFunc","i","productName","productToBeRemoved","removeProductFromCart","Notification","message","Menu","logout","padding","paddingRight","App","setErrorMessage","notification","notify","client","useApolloClient","title","Image","src","image","clear","resetStore","productToBeAdded","mocks","request","ENV","process","REACT_APP_ENV","authLink","setContext","_","headers","authorization","httpLink","HttpLink","uri","ApolloClient","cache","InMemoryCache","link","concat","Provider","children","defaultOptions","watchQuery","fetchPolicy","ReactDOM","render"],"mappings":"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","file":"static/js/main.8d134769.chunk.js","sourcesContent":["import { gql } from '@apollo/client'\n\nexport const ALL_PRODUCTS = gql`\n  query allProductsByCategory($category: String){\n    allProducts(category: $category) {\n      name\n      price\n      quantity\n      id\n      categories\n      description\n      comments {\n        id\n        user\n        product\n        content\n        grade\n      }\n      units_sold\n      average_grade\n    }\n  }\n  `\nexport const LOGIN = gql`\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      value\n    }\n  }\n`\n\nexport const ALL_CATEGORIES = gql`\nquery {\n  allCategories\n}\n`\nexport const ME = gql`\n  query {\n    me {\n      username\n      id\n      cart {\n        productName\n        amount\n        price\n      }\n    }\n  }\n  `\n\nexport const CREATE_USER = gql`\n  mutation createUser($username: String!, $password: String!, $passwordConf: String!) {\n    createUser(username: $username, password: $password, passwordConf: $passwordConf) {\n      username\n    }\n  }\n`\n\nexport const DECREASE_QUANTITY = gql`\n  mutation decreaseQuantity($name: String!, $quantity: Int!) {\n    decreaseQuantity(name: $name, quantity: $quantity) {\n      name\n      quantity\n    }\n  }\n`\n\nexport const FIND_PRODUCT = gql`\n  query findProduct($name: String!) {\n    findProduct(name: $name) {\n      name\n      price\n      quantity\n      average_grade\n    }\n  }\n`\n\nexport const ADD_COMMENT = gql`\n  mutation addComment($user: String!, $product: String!, $content: String! $grade: Int!) {\n    addComment(user: $user, product: $product, content: $content, grade: $grade) {\n      user\n      product\n      content\n      grade\n    }\n  }\n`\n\nexport const ALL_COMMENTS = gql`\n  query allCommentsByProduct($product: String){\n    allComments(product: $product) {\n      user\n      product\n      content\n    }\n  }\n`\n\nexport const ADD_TO_CART = gql`\n  mutation addToCart($productName: String!, $price: Float!) {\n    addToCart(productName: $productName, price: $price) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`\n\nexport const REMOVE_FROM_CART = gql`\n  mutation removeFromCart($productName: String!) {\n    removeFromCart(productName: $productName) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`\n\nexport const TOTAL_PRICE = gql`\n  query {\n    totalPrice\n  }\n`\n\nexport const CHECKOUT = gql`\n  mutation {\n    checkout {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`\n\nexport const REMOVE_COMMENT = gql`\n  mutation removeComment($productId: String!) {\n    removeComment(productId: $productId) {\n      name\n      id\n    }\n  }\n`","import React, { useState, useEffect } from 'react'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { ME, ALL_PRODUCTS, ADD_COMMENT, REMOVE_COMMENT } from '../queries'\nimport { checkDocument } from '@apollo/client/utilities'\nimport { useRouteMatch } from 'react-router'\nimport { Table, Form, Button } from 'react-bootstrap'\n\nconst Product = ({ shownProduct, addToCart, setError }) => {\n  const [content, setContent] = useState('')\n  const [comments, setComments] = useState([])\n  const [grade, setGrade] = useState(null)\n  const userData = useQuery(ME)\n  const [allowReview, setAllowReview] = useState(true)\n  const [user, setUser] = useState(null)\n  const [ createReview, result ] = useMutation(ADD_COMMENT, {  \n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n  const [ removeReview, removeResult ] = useMutation(REMOVE_COMMENT, {\n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n  useEffect(() => {\n    if (!shownProduct || !localStorage.getItem('shop-user-token') || !document.getElementById('buy-button')) {\n      return\n    }\n    console.log('kommentit ', comments)\n    setComments(shownProduct.comments) \n\n    const buyButton =  document.getElementById('buy-button')\n\n    if (shownProduct.quantity < 1) {\n      buyButton.disabled = true\n    } else {\n      buyButton.disabled = false\n    }\n    \n  })\n\n  useEffect(() => {    \n    if (userData.data && userData.data.me) {    \n      setUser(userData.data.me.username)  \n    }  \n  }, [userData])\n\n  useEffect(() => {    \n    if (removeResult.data) {    \n      console.log('DATA ', removeResult)\n    }  \n  }, [removeResult])\n\n  useEffect( async () => {\n    if (userData.data && userData.data.me && shownProduct) {\n      let reviewCheck =  await comments.filter(c => c.user === userData.data.me.username)  \n  \n      if (reviewCheck.length > 0) {\n        setAllowReview(false)\n      } else {\n        setAllowReview(true)\n      }\n    }\n  })\n\n  if (userData.loading) {\n    return (\n      <div>loading...</div>\n    )\n  }\n\n  if (!shownProduct) {\n    return null\n  }\n\n  console.log('tuote ', shownProduct)\n  console.log('kom', comments.length)\n\n  if (!localStorage.getItem('shop-user-token')) {\n    return (\n      <div>\n        <h2 className=\"midHeader\">{shownProduct.name}</h2>\n        <Table striped>\n          <tbody>\n            <tr>\n              <th></th>\n              <th>\n                price\n              </th>\n              <th>\n                description\n              </th>\n              <th>\n                quantity\n              </th>\n              <th>\n                average grade\n              </th>\n            </tr>\n            <tr>\n              <td>{shownProduct.name}</td>\n              <td>${shownProduct.price}</td>\n              <td>{shownProduct.description}</td>\n              <td>{shownProduct.quantity}</td>\n              <td>{shownProduct.average_grade}</td>\n            </tr>\n          </tbody>\n        </Table>\n        Log in to see the reviews for this product\n      </div>\n    )\n  }\n  const button = <Button className=\"generalButton\" id='buy-button' onClick={() => addToCart(shownProduct)}>add to cart</Button>\n\n  const postReview = async (event) => {\n    event.preventDefault()\n\n    const product = shownProduct.id\n    createReview({ variables: { user, product, content, grade } })\n    setContent('')\n    setGrade(null)\n  }\n\n  const deleteReview = async (event) => {\n    if (window.confirm(`Confirm to delete your review`)) {\n      event.preventDefault()\n\n      const productId = shownProduct.id\n      removeReview({ variables: { productId } })\n    }\n  }\n\n  const deleteButton = () => (\n    <Form onSubmit={deleteReview}>\n      <div>\n        <Button type=\"submit\" className=\"generalButton\">delete your review</Button>\n      </div>\n    </Form>\n  )\n\n  const reviewForm = () => (\n    <Form onSubmit={postReview}>\n      <h3>Review this product</h3>\n      <Form.Label>Grade (1-5): </Form.Label>\n      <input \n        id='grade'         \n        type='number'\n        min='1'\n        max='5'\n        size= '1'\n        value={grade}\n        onChange={({ target }) => setGrade(parseInt(target.value))}\n      />\n      <br></br>\n      <textarea value={content} onChange={({ target }) => setContent(target.value)} className=\"text\" cols=\"50\" rows =\"5\"></textarea>\n      <div>\n        <Button className=\"generalButton\" type='submit'>Review this product</Button>\n      </div>\n    </Form>\n  )\n\n  return (\n    <div>\n      <h2 className=\"midHeader\">{shownProduct.name}</h2>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              price\n            </th>\n            <th>\n              description\n            </th>\n            <th>\n              quantity\n            </th>\n            <th>\n              average grade\n            </th>\n            <th></th>\n          </tr>\n          <tr>\n            <td>{shownProduct.name}</td>\n            <td>${shownProduct.price}</td>\n            <td>{shownProduct.description}</td>\n            <td>{shownProduct.quantity}</td>\n            <td>{shownProduct.average_grade}</td>\n            <td>{button}</td>\n          </tr>\n        </tbody>\n      </Table>\n        {comments.map(c =>\n          <div key={c.id}>\n            <div>\n              {c.user} gave grade {c.grade} and commented:\n            </div>\n            <div className=\"review\">\n              {c.content}\n            </div>\n            <div>\n              {userData.data.me.username === c.user && deleteButton()}\n            </div>\n          </div>\n        )}\n      {allowReview !== false && reviewForm()}\n    </div>\n  )\n}\n\nexport default Product","import React, { useState, useEffect } from 'react'\nimport { useQuery, useLazyQuery } from '@apollo/client'\nimport { ALL_PRODUCTS, ALL_CATEGORIES, ME } from '../queries'\nimport Product from './Product'\nimport { Switch, Route, useRouteMatch } from 'react-router'\nimport { Table, Button } from 'react-bootstrap'\n\nconst Products = ({ myCart, setMyCart, addToCart, setError }) => {\n  const categoriesResult = useQuery(ALL_CATEGORIES)\n  const [getProducts, result] = useLazyQuery(ALL_PRODUCTS)\n  const [category, setCategory] = useState('')\n  const [categories, setCategories] = useState([])\n  const [products, setProducts] = useState([])\n  \n  useEffect(() => {\n    if (categoriesResult.data) {\n      setCategories(categoriesResult.data.allCategories)\n      getProducts()\n    }\n  }, [categoriesResult, getProducts])\n\n  useEffect(() => {    \n    if (result.data) {      \n      setProducts(result.data.allProducts)    \n    }  \n  }, [result])\n\n  const match = useRouteMatch('/products/:id')   \n  const product = match    \n    ? products.find(p => p.id === match.params.id)    \n    : null\n\n  if (categoriesResult.loading || result.loading) {\n    return <div>loading...</div>\n  }\n\n  const showCategory = (category) => {    \n    getProducts({ variables: { category: category } })  \n    \n    if (!category) {\n      setCategory('')\n    } else {\n      setCategory(category)\n    }\n  }\n\n  const styles = {\n    buttonStyle: {\n        marginTop: \"3px\",\n        marginBottom: \"5px\",\n        marginRight: \"10px\",\n        marginLeft: \"10px\"\n    }\n  }\n  \n  return (\n    <div className=\"bottomPadding\">\n      <Switch>\n        <Route path= \"/products/:id\">\n          <Product\n            shownProduct={product}\n            myCart={myCart}\n            setMyCart={setMyCart}\n            addToCart={addToCart}\n            setError={setError}\n          />\n        </Route>\n      </Switch>\n      <h2 className=\"midHeader\">Search products by category</h2>\n      \n      <div className=\"navBar\">\n        {categories.map(c => \n          <Button className=\"categoryButton\"style={styles.buttonStyle} onClick={() => showCategory(c)}>{c}</Button>\n        )}\n        <Button className=\"categoryButton\" style={styles.buttonStyle} onClick={() => showCategory('')}>trending</Button>\n      </div>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              price\n            </th>\n            <th>\n              quantity\n            </th>\n          </tr>\n          {products.map(p =>\n            <tr key={p.name}>\n              <td><a className=\"textLink\" href={`/products/${p.id}`} >{p.name}</a></td>\n              <td>${p.price}</td>\n              <td>{p.quantity}</td>\n            </tr>\n          )}\n        </tbody>\n      </Table>\n    </div>\n  )\n}\n\nexport default Products","import React, { useState, useEffect } from 'react'\nimport { useMutation, useQuery, useLazyQuery, from } from '@apollo/client'\nimport { LOGIN, ME } from '../queries'\nimport {\n  useHistory\n} from \"react-router-dom\"\nimport { Form, Button } from 'react-bootstrap'\n\nconst LoginForm = ({ setToken, setNotification }) => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const history = useHistory()\n\n  const [ login, result ] = useMutation(LOGIN, {\n    refetchQueries: [ { query: ME } ],  \n    onError: (error) => {\n      setNotification('Invalid credentials')\n      setTimeout(() => {\n        setNotification('')\n      }, 10000)\n    },\n  })\n\n  useEffect(() => { \n    if ( result.data ) {\n      const token = result.data.login.value\n      setToken(token)\n      localStorage.setItem('shop-user-token', token)\n      localStorage.setItem('username', username)\n      history.push('/')\n      window.location.reload()\n    }  \n  }, [result.data]) \n\n  const submit = async (event) => {\n    event.preventDefault()\n\n    login({ variables: { username, password } })\n  }\n\n  return (\n    <div className=\"bottomPadding\">\n      <h2>Login</h2>\n      <Form onSubmit={submit}>\n        <Form.Group>\n          <Form.Label>username:</Form.Label>\n          <Form.Control\n            id='username'\n            type='text'\n            value={username}\n            onChange={({ target }) => setUsername(target.value)}\n          />\n          <Form.Label>password:</Form.Label>\n          <Form.Control  \n            id='password'         \n            type='password'\n            value={password}\n            onChange={({ target }) => setPassword(target.value)}\n          />\n          <Button className=\"generalButton\" id='login-button' type='submit'>login</Button>\n        </Form.Group>\n      </Form>\n      <p>New user? Register <a id='register-link'href='/register'>here</a></p>\n    </div>\n  )\n}\n\nexport default LoginForm","import React, { useState, useEffect } from 'react'\nimport { from, useMutation } from '@apollo/client'\nimport { CREATE_USER } from '../queries'\nimport {\n  useHistory\n} from \"react-router-dom\"\nimport { Form, Button } from 'react-bootstrap'\n\nconst RegistrationForm = ({ setNotification }) => {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [passwordConf, setPasswordConf] = useState('')\n    const history = useHistory()\n\n    const [ createUser, result ] = useMutation(CREATE_USER, {  \n        onError: (error) => {\n          setNotification('Registration failed')\n          setTimeout(() => {\n            setNotification('')\n          }, 10000)\n        },\n    })\n\n    useEffect(() => { \n      if ( result.data ) {\n        setUsername('')\n        setPassword('')\n        setPasswordConf('')\n\n        history.push('/login')\n      }  \n    }, [result.data]) \n\n    const submit = async (event) => {\n        event.preventDefault()\n    \n        createUser({ variables: { username, password, passwordConf } })\n    }\n\n    return (\n      <div className=\"bottomPadding\">\n        <h2>Create a new account</h2>\n        <Form onSubmit={submit}>\n          <Form.Group>\n            <Form.Label>username:</Form.Label>\n            <Form.Control\n              id='username'\n              required\n              minLength='3'\n              maxLength='16'\n              type='text'\n              value={username}\n              onChange={({ target }) => setUsername(target.value)}\n            />\n            <Form.Label>password:</Form.Label>\n            <Form.Control\n              id='password'\n              required\n              minLength='8'\n              maxLength='32'\n              type='password'\n              value={password}\n              onChange={({ target }) => setPassword(target.value)}\n            />\n            <Form.Label>password confirmation:</Form.Label>\n            <Form.Control\n              id='passwordConf'\n              required\n              minLength='8'\n              maxLength='32'\n              type='password'\n              value={passwordConf}\n              onChange={({ target }) => setPasswordConf(target.value)}\n            />\n          <Button className=\"generalButton\" id='register-button' type='submit'>register</Button>\n          </Form.Group>\n        </Form>\n      </div>\n    )   \n}\n\nexport default RegistrationForm","import React, { useState, useEffect } from 'react'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { REMOVE_FROM_CART, CHECKOUT, ME } from '../queries'\nimport { Form, Button, Table } from 'react-bootstrap'\n\nconst ShoppingCart = ({ user, setNotification, setError }) => {\n  const [shoppingCart, setShoppingCart] = useState([])\n  const [ removeFromCart, removeResult ] = useMutation(REMOVE_FROM_CART, {\n    refetchQueries: [ { query: ME } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n  const [ checkout, checkoutResult ] = useMutation(CHECKOUT, {\n    refetchQueries: [ { query: ME } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n\n  useEffect(() => {\n    setShoppingCart(user.cart)\n  })\n\n  if (shoppingCart < 1) {\n    return (\n      <div className=\"bottomPadding\">\n        <h2>Your shopping cart</h2>\n        Your shopping cart is currently empty.\n      </div>\n    )\n  }\n\n  var total = 0\n  shoppingCart.map(item => total += item.price * item.amount)\n  total = total.toFixed(2)\n\n  const removeProductFromCart = (productToBeRemoved) => {\n    const productName = productToBeRemoved.productName\n    removeFromCart({ variables: { productName }})\n    setNotification(`Removed ${productName} from cart`)\n      setTimeout(() => {\n        setNotification('')\n      }, 5000) \n\n    total =-productToBeRemoved.price\n  }\n\n  const checkoutFunc = async () => {\n    if (window.confirm(`Confirm your purchase of $${total}`)) {\n      for (var i = 0; i < shoppingCart.length; i++) {\n      checkout()\n      setNotification(`Your purchase was successful`)\n        setTimeout(() => {\n          setNotification('')\n        }, 5000)\n      }\n    }\n  }\n  \n  return(\n    <div className=\"bottomPadding\">\n      <h2>Your shopping cart</h2>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              price per unit\n            </th>\n            <th>\n              amount\n            </th>\n            <th></th>\n          </tr>\n          {shoppingCart.map(p =>\n            <tr key={p.product}>\n              <td>{p.productName}</td>\n              <td>${p.price}</td>\n              <td>{p.amount}</td>\n              <td><button onClick={() => removeProductFromCart(p)}>remove</button></td>\n            </tr>\n          )}\n          <tr>\n            <th>grand total:</th>\n            <th>${total}</th>\n          </tr>\n        </tbody>\n      </Table>\n      <button onClick={() => checkoutFunc()}>checkout</button>\n    </div>\n  )\n}\n\n\nexport default ShoppingCart","import React from 'react'\n\nconst Notification = ({message}) => {\n  console.log(message)\n\n  if (message === '') {\n    return null\n  } else if (message.match('^Added') || message.match('^Your purchase was successful')) {\n    return <div className='addProd'>{message}</div>\n  } else if (message.match('^Removed') || message.match('^Make') || message.match('^Invalid')) {\n      return <div className='removeProd'>{message}</div>\n  } else {\n      return <div className='removeProd'>{message}</div>\n  }\n}\n\nexport default Notification","import React from 'react'\n\nconst Menu = ({ logout }) => {\n  const padding = {\n    paddingRight: 5\n  }\n  \n  if (!localStorage.getItem('shop-user-token')) {\n    return(\n      <div className=\"menuBar\">\n        <a className=\"menuLink\" href='/products' style={padding}>products</a>\n        <a className=\"menuLink\" href='/login' id='login' style={padding}>login</a>\n        <a className=\"menuLink\" href='/register' style={padding}>register</a>\n      </div>\n    )\n  }\n  \n  return(\n    <div className=\"menuBar\">\n      <a className=\"menuLink\" href='/products' style={padding}>products</a>\n      <a className=\"menuLink\" href='/shopping-cart' style={padding}>shopping cart</a>\n      <a className=\"menuLink\" href='/' onClick={logout}>logout</a>\n    </div>\n  )\n}\n\nexport default Menu","export default \"data:image/png;base64,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\"","import React, { useState, useEffect } from 'react'\nimport { useQuery, useApolloClient, useMutation, useLazyQuery } from '@apollo/client'\nimport Products from './components/Products'\nimport LoginForm from './components/LoginForm'\nimport RegistrationForm from './components/RegistrationForm'\nimport ShoppingCart from './components/ShoppingCart'\nimport Notification from './components/Notification'\nimport Menu from './components/Menu'\nimport image from './logos/new_logo.png'\nimport { Image } from 'react-bootstrap'\nimport { ME, DECREASE_QUANTITY, ALL_PRODUCTS, ADD_TO_CART } from './queries'\nimport {\n  Switch, Route, Link, useRouteMatch\n} from \"react-router-dom\"\n\nconst App = () =>  {\n  const [errorMessage, setErrorMessage] = useState('')\n  const [notification, setNotification] = useState('')\n  const userData = useQuery(ME)\n  const [ decreaseQuantity, result ] = useMutation(DECREASE_QUANTITY, {\n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      notify(error)\n    },\n  })\n  const [ addToCart, addResult ] = useMutation(ADD_TO_CART, {\n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      notify(error)\n    },\n  })\n  const [token, setToken] = useState(null)\n  const client = useApolloClient()\n  const [myCart, setMyCart] = useState([])\n\n  useEffect(() => {\n    document.title = 'Pennywise Web Store'\n  }, [])\n\n  const notify = (message) => {\n    setErrorMessage(message)\n    setTimeout(() => {\n      setErrorMessage('')\n    }, 10000)\n  }\n\n  if (userData.loading) {\n    return(\n      <div>loading...</div>\n    )\n  }\n\n  const addProductToCart =  (productToBeAdded) => {\n    const productName = productToBeAdded.name\n    const price = productToBeAdded.price\n    console.log('prod ', productName)\n    addToCart({ variables: { productName, price } })\n    setNotification(`Added ${productName} to cart`)\n      setTimeout(() => {\n        setNotification('')\n      }, 5000)\n  }\n\n  const logout = () => {\n    setToken(null)\n    localStorage.clear()\n    client.resetStore()\n  }\n\n  if (!localStorage.getItem('shop-user-token')) {\n    return (\n      <div className=\"container\">\n        <div className=\"header\">\n          <Image src={image} className=\"logoDetails\"/>\n          <h1>Pennywise Web Store</h1>\n        </div>\n        <Notification message={notification} />\n        <Menu />\n        <Switch>\n          <Route path= \"/login\">\n            <LoginForm\n              setToken={setToken}\n              setNotification={setNotification}\n            />      \n          </Route>\n          <Route path= \"/register\">\n            <RegistrationForm\n              setNotification={setNotification}\n            />\n          </Route>\n          <Route path= \"/products\">\n            <Products \n            />\n          </Route>\n        </Switch>\n      </div>\n    );\n  }\n\n  return (\n      <div className=\"container\">\n        <div className=\"header\">\n          <Image src={image} className=\"logoDetails\"/>\n          <h1>Pennywise Web Store</h1>\n        </div>\n        <Notification message={notification} />\n        <Menu logout={logout}/>\n        <Switch>\n          <Route path= \"/shopping-cart\">\n            <ShoppingCart\n              user = {userData.data.me}\n              setNotification={setNotification}\n              setError={notify}\n            />\n          </Route>\n          <Route path= \"/products\">\n            <Products \n              myCart={myCart}\n              setMyCart={setMyCart}\n              addToCart={addProductToCart}\n              setError={notify}\n            />\n          </Route>\n        </Switch>\n      </div>\n  );\n}\n\nexport default App;\n","import {\n  CREATE_USER, LOGIN, ME\n} from '../queries'\n\nconst mocks = [\n  {\n    request: {\n      query: CREATE_USER,\n      variables: {\n        username: 'Harri',\n        password: 'salainen',\n        passwordConf: 'salainen'\n      }\n    },\n    result: {\n      data: {\n        createUser: {\n          username: 'Harri',\n          password: 'salainen',\n          passwordConf: 'salainen'\n        }\n      }\n    }\n  },\n  {\n    request: {\n      query: LOGIN,\n      variables: {\n        username: 'Harri',\n        password: 'salainen',\n      }\n    },\n    result: {\n      data: {\n        login: {\n          value: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijc1NjFjNWE2LTc1NjYtNDA5Ny04NDUzLWM5MjU0NDE0ZTM5NyIsImVtYWlsIjoiaGVoZUBoZWhlLmZpIiwiaWF0IjoxNjIzNzY1NjkwLCJleHAiOjE2MjM3NjkyOTB9.WMQnhKrWbjqPxiieWsVMY4x5GA6pi91DM9zo5eo0GFY',\n        }\n      }\n    }\n  },\n  {\n    request: {\n      query: ME\n    },\n    result: {\n      data: {\n        me: {\n          username: 'Harri',\n        }\n      }\n    }\n  }\n]\n\nexport default mocks","import React from 'react'\nimport {\n  ApolloClient, ApolloProvider, HttpLink, InMemoryCache,\n} from '@apollo/client'\nimport { MockedProvider } from '@apollo/client/testing'\nimport { setContext } from 'apollo-link-context'\nimport mocks from './mocks'\n\nconst ENV = process.env.REACT_APP_ENV\n\nconst authLink = setContext((_, { headers }) => {\n  const token = localStorage.getItem('shop-user-token')\n  return {    \n    headers: {      \n      ...headers,      \n      authorization: token ? `bearer ${token}` : null,    \n    }  \n  }\n})\n\nconst httpLink = new HttpLink({ uri: '/graphql' })\n\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: authLink.concat(httpLink)\n})\n\nconst Provider = ({ children }) => {\n  if (ENV === 'test') {\n    return (\n      <MockedProvider\n        mocks={mocks}\n        defaultOptions={{\n          watchQuery: { fetchPolicy: 'no-cache' },\n          query: { fetchPolicy: 'no-cache' },\n        }}\n      >\n        <>{children}</>\n      </MockedProvider>\n    )\n  }\n\n  return (\n    <ApolloProvider client={client}>\n      <>{children}</>\n    </ApolloProvider>\n  )\n}\n\nexport default Provider","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\nimport {\n  BrowserRouter as Router,\n} from \"react-router-dom\"\nimport Provider from './config/provider'\n\nReactDOM.render(\n  <Provider>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}