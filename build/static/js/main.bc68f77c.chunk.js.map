{"version":3,"sources":["queries.js","components/Product.js","components/Products.js","components/LoginForm.js","components/RegistrationForm.js","components/ShoppingCart.js","components/Notification.js","components/Menu.js","logos/new_logo.png","App.js","config/mocks.js","config/provider.js","index.js"],"names":["ALL_PRODUCTS","gql","LOGIN","ALL_CATEGORIES","ME","CREATE_USER","DECREASE_QUANTITY","ADD_COMMENT","ALL_COMMENTS","ADD_TO_CART","REMOVE_FROM_CART","CHECKOUT","Product","shownProduct","addToCart","setError","useState","content","setContent","comments","setComments","grade","setGrade","userData","useQuery","allowReview","setAllowReview","useLazyQuery","user","setUser","useMutation","refetchQueries","query","onError","error","createReview","useEffect","localStorage","getItem","document","getElementById","buyButton","quantity","disabled","data","me","username","a","filter","c","length","loading","console","log","name","Table","striped","price","description","average_grade","button","Button","id","onClick","postReview","event","preventDefault","product","variables","map","Form","onSubmit","Label","type","min","max","size","value","onChange","target","parseInt","className","cols","rows","Products","myCart","setMyCart","categoriesResult","getProducts","result","setCategory","categories","setCategories","products","setProducts","allCategories","allProducts","match","useRouteMatch","find","p","params","showCategory","category","styles","buttonStyle","marginTop","marginBottom","marginRight","marginLeft","path","style","href","LoginForm","setToken","setNotification","setUsername","password","setPassword","history","useHistory","setTimeout","login","token","setItem","push","window","location","reload","submit","Group","Control","RegistrationForm","passwordConf","setPasswordConf","createUser","required","minLength","maxLength","ShoppingCart","shoppingCart","setShoppingCart","removeFromCart","checkout","cart","total","item","amount","toFixed","checkoutFunc","i","productName","productToBeRemoved","removeProductFromCart","Notification","message","Menu","logout","padding","paddingRight","App","setErrorMessage","notification","notify","client","useApolloClient","title","Image","src","image","clear","resetStore","productToBeAdded","mocks","request","ENV","process","REACT_APP_ENV","authLink","setContext","_","headers","authorization","httpLink","HttpLink","uri","ApolloClient","cache","InMemoryCache","link","concat","Provider","children","defaultOptions","watchQuery","fetchPolicy","ReactDOM","render"],"mappings":"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","file":"static/js/main.bc68f77c.chunk.js","sourcesContent":["import { gql } from '@apollo/client'\n\nexport const ALL_PRODUCTS = gql`\n  query allProductsByCategory($category: String){\n    allProducts(category: $category) {\n      name\n      price\n      quantity\n      id\n      categories\n      description\n      comments {\n        user\n        product\n        content\n        grade\n      }\n      units_sold\n      average_grade\n    }\n  }\n  `\nexport const LOGIN = gql`\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      value\n    }\n  }\n`\n\nexport const ALL_CATEGORIES = gql`\nquery {\n  allCategories\n}\n`\nexport const ME = gql`\n  query {\n    me {\n      username\n      id\n      cart {\n        productName\n        amount\n        price\n      }\n    }\n  }\n  `\n\nexport const CREATE_USER = gql`\n  mutation createUser($username: String!, $password: String!, $passwordConf: String!) {\n    createUser(username: $username, password: $password, passwordConf: $passwordConf) {\n      username\n    }\n  }\n`\n\nexport const DECREASE_QUANTITY = gql`\n  mutation decreaseQuantity($name: String!, $quantity: Int!) {\n    decreaseQuantity(name: $name, quantity: $quantity) {\n      name\n      quantity\n    }\n  }\n`\n\nexport const FIND_PRODUCT = gql`\n  query findProduct($name: String!) {\n    findProduct(name: $name) {\n      name\n      price\n      quantity\n      average_grade\n    }\n  }\n`\n\nexport const ADD_COMMENT = gql`\n  mutation addComment($user: String!, $product: String!, $content: String! $grade: Int!) {\n    addComment(user: $user, product: $product, content: $content, grade: $grade) {\n      user\n      product\n      content\n      grade\n    }\n  }\n`\n\nexport const ALL_COMMENTS = gql`\n  query allCommentsByProduct($product: String){\n    allComments(product: $product) {\n      user\n      product\n      content\n    }\n  }\n`\n\nexport const ADD_TO_CART = gql`\n  mutation addToCart($productName: String!, $price: Float!) {\n    addToCart(productName: $productName, price: $price) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`\n\nexport const REMOVE_FROM_CART = gql`\n  mutation removeFromCart($productName: String!) {\n    removeFromCart(productName: $productName) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`\n\nexport const TOTAL_PRICE = gql`\n  query {\n    totalPrice\n  }\n`\n\nexport const CHECKOUT = gql`\n  mutation {\n    checkout {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n`","import React, { useState, useEffect } from 'react'\nimport { useQuery, useLazyQuery, useMutation } from '@apollo/client'\nimport Comments from './Comments'\nimport { ME, ALL_COMMENTS, ALL_PRODUCTS, ADD_COMMENT } from '../queries'\nimport { checkDocument } from '@apollo/client/utilities'\nimport { useRouteMatch } from 'react-router'\nimport { Table, Form, Button } from 'react-bootstrap'\n\nconst Product = ({ shownProduct, addToCart, setError }) => {\n  const [content, setContent] = useState('')\n  const [comments, setComments] = useState([])\n  const [grade, setGrade] = useState(null)\n  const userData = useQuery(ME)\n  const [allowReview, setAllowReview] = useState(true)\n  const [getComments, commentsResult] = useLazyQuery(ALL_COMMENTS)\n  const [user, setUser] = useState(null)\n  const [ createReview, result ] = useMutation(ADD_COMMENT, {  \n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n  useEffect(() => {\n    if (!shownProduct || !localStorage.getItem('shop-user-token') || !document.getElementById('buy-button')) {\n      return\n    }\n\n    setComments(shownProduct.comments) \n\n    const buyButton =  document.getElementById('buy-button')\n\n    if (shownProduct.quantity < 1) {\n      buyButton.disabled = true\n    } else {\n      buyButton.disabled = false\n    }\n    \n  })\n\n  useEffect(() => {    \n    if (userData.data && userData.data.me) {    \n      setUser(userData.data.me.username)  \n    }  \n  }, [userData])\n\n  useEffect( async () => {\n    if (userData.data && userData.data.me && shownProduct) {\n      let reviewCheck =  await comments.filter(c => c.user === userData.data.me.username)  \n  \n      if (reviewCheck.length > 0) {\n        setAllowReview(false)\n      } else {\n        setAllowReview(true)\n      }\n    }\n  })\n\n  if (userData.loading) {\n    return (\n      <div>loading...</div>\n    )\n  }\n\n  if (!shownProduct) {\n    return null\n  }\n\n  console.log('tuote ', shownProduct)\n  console.log('kom', comments.length)\n  console.log('onko sallittu ', allowReview)\n\n  if (!localStorage.getItem('shop-user-token')) {\n    return (\n      <div>\n        <h2>{shownProduct.name}</h2>\n        <Table striped>\n          <tbody>\n            <tr>\n              <th></th>\n              <th>\n                price\n              </th>\n              <th>\n                description\n              </th>\n              <th>\n                quantity\n              </th>\n              <th>\n                average grade\n              </th>\n            </tr>\n            <tr>\n              <td>{shownProduct.name}</td>\n              <td>${shownProduct.price}</td>\n              <td>{shownProduct.description}</td>\n              <td>{shownProduct.quantity}</td>\n              <td>{shownProduct.average_grade}</td>\n            </tr>\n          </tbody>\n        </Table>\n        Log in to see the reviews for this product\n      </div>\n    )\n  }\n  const button = <Button id='buy-button' onClick={() => addToCart(shownProduct)}>add to cart</Button>\n\n  const postReview = async (event) => {\n    \n    event.preventDefault()\n    const product = shownProduct.id\n    createReview({ variables: { user, product, content, grade } })\n    setContent('')\n    setGrade(null)\n  }\n\n  const reviewForm = () => (\n    <Form onSubmit={postReview}>\n      <h3>Review this product</h3>\n      <Form.Label>Grade (1-5): </Form.Label>\n      <input \n        id='grade'         \n        type='number'\n        min='1'\n        max='5'\n        size= '1'\n        value={grade}\n        onChange={({ target }) => setGrade(parseInt(target.value))}\n      />\n      <br></br>\n      <textarea value={content} onChange={({ target }) => setContent(target.value)} className=\"text\" cols=\"50\" rows =\"5\"></textarea>\n      <div>\n        <Button type='submit'>Review this product</Button>\n      </div>\n    </Form>\n  )\n\n  return (\n    <div>\n      <h2>{shownProduct.name}</h2>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              price\n            </th>\n            <th>\n              description\n            </th>\n            <th>\n              quantity\n            </th>\n            <th>\n              average grade\n            </th>\n            <th></th>\n          </tr>\n          <tr>\n            <td>{shownProduct.name}</td>\n            <td>${shownProduct.price}</td>\n            <td>{shownProduct.description}</td>\n            <td>{shownProduct.quantity}</td>\n            <td>{shownProduct.average_grade}</td>\n            <td>{button}</td>\n          </tr>\n        </tbody>\n      </Table>\n      <Table striped>\n        <tbody>\n        {comments.map(c =>\n          <tr key={c.id}>\n            <th>\n              {c.user} gave grade {c.grade} and commented:\n            </th>\n            <tr>\n              <th>\n                {c.content}\n              </th>\n            </tr>\n          </tr>\n          )}\n        </tbody>\n      </Table>\n      {allowReview !== false && reviewForm()}\n    </div>\n  )\n}\n\nexport default Product","import React, { useState, useEffect } from 'react'\nimport { useQuery, useLazyQuery } from '@apollo/client'\nimport { ALL_PRODUCTS, ALL_CATEGORIES, ME } from '../queries'\nimport Product from './Product'\nimport { Switch, Route, useRouteMatch } from 'react-router'\nimport { Table, Button } from 'react-bootstrap'\n\nconst Products = ({ myCart, setMyCart, addToCart, setError }) => {\n  const categoriesResult = useQuery(ALL_CATEGORIES)\n  const [getProducts, result] = useLazyQuery(ALL_PRODUCTS)\n  const [category, setCategory] = useState('')\n  const [categories, setCategories] = useState([])\n  const [products, setProducts] = useState([])\n  \n  useEffect(() => {\n    if (categoriesResult.data) {\n      setCategories(categoriesResult.data.allCategories)\n      getProducts()\n    }\n  }, [categoriesResult, getProducts])\n\n  useEffect(() => {    \n    if (result.data) {      \n      setProducts(result.data.allProducts)    \n    }  \n  }, [result])\n\n  const match = useRouteMatch('/products/:id')   \n  const product = match    \n    ? products.find(p => p.id === match.params.id)    \n    : null\n\n  if (categoriesResult.loading || result.loading) {\n    return <div>loading...</div>\n  }\n\n  const showCategory = (category) => {    \n    getProducts({ variables: { category: category } })  \n    \n    if (!category) {\n      setCategory('')\n    } else {\n      setCategory(category)\n    }\n  }\n\n  const styles = {\n    buttonStyle: {\n        marginTop: \"3px\",\n        marginBottom: \"3px\",\n        marginRight: \"3px\",\n        marginLeft: \"3px\"\n    }\n  }\n  \n  return (\n    <div>\n      <Switch>\n        <Route path= \"/products/:id\">\n          <Product\n            shownProduct={product}\n            myCart={myCart}\n            setMyCart={setMyCart}\n            addToCart={addToCart}\n            setError={setError}\n          />\n        </Route>\n      </Switch>\n      <h2>Search products</h2>\n      \n      <div className=\"navBar\">\n        {categories.map(c => \n          <Button style={styles.buttonStyle} onClick={() => showCategory(c)}>{c}</Button>\n        )}\n        <Button style={styles.buttonStyle} onClick={() => showCategory('')}>trending</Button>\n      </div>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              price\n            </th>\n            <th>\n              quantity\n            </th>\n          </tr>\n          {products.map(p =>\n            <tr key={p.name}>\n              <td><a href={`/products/${p.id}`} >{p.name}</a></td>\n              <td>${p.price}</td>\n              <td>{p.quantity}</td>\n            </tr>\n          )}\n        </tbody>\n      </Table>\n    </div>\n  )\n}\n\nexport default Products","import React, { useState, useEffect } from 'react'\nimport { useMutation, useQuery, useLazyQuery, from } from '@apollo/client'\nimport { LOGIN, ME } from '../queries'\nimport {\n  useHistory\n} from \"react-router-dom\"\nimport { Form, Button } from 'react-bootstrap'\n\nconst LoginForm = ({ setToken, setNotification }) => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const history = useHistory()\n\n  const [ login, result ] = useMutation(LOGIN, {\n    refetchQueries: [ { query: ME } ],  \n    onError: (error) => {\n      setNotification('Invalid credentials')\n      setTimeout(() => {\n        setNotification('')\n      }, 10000)\n    },\n  })\n\n  useEffect(() => { \n    if ( result.data ) {\n      const token = result.data.login.value\n      setToken(token)\n      localStorage.setItem('shop-user-token', token)\n      localStorage.setItem('username', username)\n      history.push('/')\n      window.location.reload()\n    }  \n  }, [result.data]) \n\n  const submit = async (event) => {\n    event.preventDefault()\n\n    login({ variables: { username, password } })\n  }\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <Form onSubmit={submit}>\n        <Form.Group>\n          <Form.Label>username:</Form.Label>\n          <Form.Control\n            id='username'\n            type='text'\n            value={username}\n            onChange={({ target }) => setUsername(target.value)}\n          />\n          <Form.Label>password:</Form.Label>\n          <Form.Control  \n            id='password'         \n            type='password'\n            value={password}\n            onChange={({ target }) => setPassword(target.value)}\n          />\n          <Button id='login-button' type='submit'>login</Button>\n        </Form.Group>\n      </Form>\n      <p>New user? Register <a id='register-link'href='/register'>here</a></p>\n    </div>\n  )\n}\n\nexport default LoginForm","import React, { useState, useEffect } from 'react'\nimport { from, useMutation } from '@apollo/client'\nimport { CREATE_USER } from '../queries'\nimport {\n  useHistory\n} from \"react-router-dom\"\nimport { Form, Button } from 'react-bootstrap'\n\nconst RegistrationForm = ({ setNotification }) => {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [passwordConf, setPasswordConf] = useState('')\n    const history = useHistory()\n\n    const [ createUser, result ] = useMutation(CREATE_USER, {  \n        onError: (error) => {\n          setNotification('Registration failed')\n          setTimeout(() => {\n            setNotification('')\n          }, 10000)\n        },\n    })\n\n    useEffect(() => { \n      if ( result.data ) {\n        setUsername('')\n        setPassword('')\n        setPasswordConf('')\n\n        history.push('/login')\n      }  \n    }, [result.data]) \n\n    const submit = async (event) => {\n        event.preventDefault()\n    \n        createUser({ variables: { username, password, passwordConf } })\n    }\n\n    return (\n      <div>\n        <h2>Create a new account</h2>\n        <Form onSubmit={submit}>\n          <Form.Group>\n            <Form.Label>username:</Form.Label>\n            <Form.Control\n              id='username'\n              required\n              minLength='3'\n              maxLength='16'\n              type='text'\n              value={username}\n              onChange={({ target }) => setUsername(target.value)}\n            />\n            <Form.Label>password:</Form.Label>\n            <Form.Control\n              id='password'\n              required\n              minLength='8'\n              maxLength='32'\n              type='password'\n              value={password}\n              onChange={({ target }) => setPassword(target.value)}\n            />\n            <Form.Label>password confirmation:</Form.Label>\n            <Form.Control\n              id='passwordConf'\n              required\n              minLength='8'\n              maxLength='32'\n              type='password'\n              value={passwordConf}\n              onChange={({ target }) => setPasswordConf(target.value)}\n            />\n          <Button id='register-button' type='submit'>register</Button>\n          </Form.Group>\n        </Form>\n      </div>\n    )   \n}\n\nexport default RegistrationForm","import React, { useState, useEffect } from 'react'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { REMOVE_FROM_CART, CHECKOUT, ME } from '../queries'\nimport { Form, Button, Table } from 'react-bootstrap'\n\nconst ShoppingCart = ({ user, setNotification, setError }) => {\n  const [shoppingCart, setShoppingCart] = useState([])\n  const [ removeFromCart, removeResult ] = useMutation(REMOVE_FROM_CART, {\n    refetchQueries: [ { query: ME } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n  const [ checkout, checkoutResult ] = useMutation(CHECKOUT, {\n    refetchQueries: [ { query: ME } ],\n    onError: (error) => {\n      setError(error)\n    },\n  })\n\n  useEffect(() => {\n    setShoppingCart(user.cart)\n  })\n\n  if (shoppingCart < 1) {\n    return (\n      <div>\n        <h2>Your shopping cart</h2>\n        Your shopping cart is currently empty.\n      </div>\n    )\n  }\n\n  var total = 0\n  shoppingCart.map(item => total += item.price * item.amount)\n  total = total.toFixed(2)\n\n  const removeProductFromCart = (productToBeRemoved) => {\n    const productName = productToBeRemoved.productName\n    removeFromCart({ variables: { productName }})\n    setNotification(`Removed ${productName} from cart`)\n      setTimeout(() => {\n        setNotification('')\n      }, 5000) \n\n    total =-productToBeRemoved.price\n  }\n\n  const checkoutFunc = async () => {\n    for (var i = 0; i < shoppingCart.length; i++) {\n    checkout()\n    setNotification(`Your purchase was successful`)\n      setTimeout(() => {\n        setNotification('')\n      }, 5000)\n    }\n  }\n  \n  return(\n    <div>\n      <h2>Your shopping cart</h2>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              price per unit\n            </th>\n            <th>\n              amount\n            </th>\n            <th></th>\n          </tr>\n          {shoppingCart.map(p =>\n            <tr key={p.product}>\n              <td>{p.productName}</td>\n              <td>${p.price}</td>\n              <td>{p.amount}</td>\n              <td><button onClick={() => removeProductFromCart(p)}>remove</button></td>\n            </tr>\n          )}\n          <tr>\n            <th>grand total:</th>\n            <th>${total}</th>\n          </tr>\n        </tbody>\n      </Table>\n      <button onClick={() => checkoutFunc()}>checkout</button>\n    </div>\n  )\n}\n\n\nexport default ShoppingCart","import React from 'react'\n\nconst Notification = ({message}) => {\n  console.log(message)\n\n  if (message === '') {\n    return null\n  } else if (message.match('^Added') || message.match('^Your purchase was successful')) {\n    return <div className='addProd'>{message}</div>\n  } else if (message.match('^Removed') || message.match('^Make') || message.match('^Invalid')) {\n      return <div className='removeProd'>{message}</div>\n  } else {\n      return <div className='removeProd'>{message}</div>\n  }\n}\n\nexport default Notification","import React from 'react'\n\nconst Menu = ({ logout }) => {\n  const padding = {\n    paddingRight: 5\n  }\n  \n  if (!localStorage.getItem('shop-user-token')) {\n    return(\n      <div className=\"navBar\">\n        <a href='/products' style={padding}>products</a>\n        <a href='/login' id='login' style={padding}>login</a>\n      </div>\n    )\n  }\n  \n  return(\n    <div className=\"navBar\">\n      <a href='/products' style={padding}>products</a>\n      <a href='/shopping-cart' style={padding}>shopping cart</a>\n      <a href='/' onClick={logout}>logout</a>\n    </div>\n  )\n}\n\nexport default Menu","export default \"data:image/png;base64,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\"","import React, { useState, useEffect } from 'react'\nimport { useQuery, useApolloClient, useMutation, useLazyQuery } from '@apollo/client'\nimport Products from './components/Products'\nimport LoginForm from './components/LoginForm'\nimport RegistrationForm from './components/RegistrationForm'\nimport ShoppingCart from './components/ShoppingCart'\nimport Notification from './components/Notification'\nimport Menu from './components/Menu'\nimport image from './logos/new_logo.png'\nimport { Image } from 'react-bootstrap'\nimport { ME, DECREASE_QUANTITY, ALL_PRODUCTS, ADD_TO_CART } from './queries'\nimport {\n  Switch, Route, Link, useRouteMatch\n} from \"react-router-dom\"\n\nconst App = () =>  {\n  const [errorMessage, setErrorMessage] = useState('')\n  const [notification, setNotification] = useState('')\n  const userData = useQuery(ME)\n  const [ decreaseQuantity, result ] = useMutation(DECREASE_QUANTITY, {\n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      notify(error)\n    },\n  })\n  const [ addToCart, addResult ] = useMutation(ADD_TO_CART, {\n    refetchQueries: [ { query: ALL_PRODUCTS } ],\n    onError: (error) => {\n      notify(error)\n    },\n  })\n  const [token, setToken] = useState(null)\n  const client = useApolloClient()\n  const [myCart, setMyCart] = useState([])\n\n  useEffect(() => {\n    document.title = 'Pennywise Web Store'\n  }, [])\n\n  const notify = (message) => {\n    setErrorMessage(message)\n    setTimeout(() => {\n      setErrorMessage('')\n    }, 10000)\n  }\n\n  if (userData.loading) {\n    return(\n      <div>loading...</div>\n    )\n  }\n\n  const addProductToCart =  (productToBeAdded) => {\n    const productName = productToBeAdded.name\n    const price = productToBeAdded.price\n    console.log('prod ', productName)\n    addToCart({ variables: { productName, price } })\n    setNotification(`Added ${productName} to cart`)\n      setTimeout(() => {\n        setNotification('')\n      }, 5000)\n  }\n\n  const logout = () => {\n    setToken(null)\n    localStorage.clear()\n    client.resetStore()\n  }\n\n  if (!localStorage.getItem('shop-user-token')) {\n    return (\n      <div className=\"container\">\n        <div className=\"header\">\n          <Image src={image} className=\"logoDetails\"/>\n          <h1>Pennywise Web Store</h1>\n        </div>\n        <Notification message={notification} />\n        <Menu />\n        <Switch>\n          <Route path= \"/login\">\n            <LoginForm\n              setToken={setToken}\n              setNotification={setNotification}\n            />      \n          </Route>\n          <Route path= \"/register\">\n            <RegistrationForm\n              setNotification={setNotification}\n            />\n          </Route>\n          <Route path= \"/products\">\n            <Products \n            />\n          </Route>\n        </Switch>\n      </div>\n    );\n  }\n\n  return (\n      <div className=\"container\">\n        <div className=\"header\">\n          <Image src={image} className=\"logoDetails\"/>\n          <h1>Pennywise Web Store</h1>\n        </div>\n        <Notification message={notification} />\n        <Menu logout={logout}/>\n        <Switch>\n          <Route path= \"/shopping-cart\">\n            <ShoppingCart\n              user = {userData.data.me}\n              setNotification={setNotification}\n              setError={notify}\n            />\n          </Route>\n          <Route path= \"/products\">\n            <Products \n              myCart={myCart}\n              setMyCart={setMyCart}\n              addToCart={addProductToCart}\n              setError={notify}\n            />\n          </Route>\n        </Switch>\n      </div>\n  );\n}\n\nexport default App;\n","import {\n  CREATE_USER, LOGIN, ME\n} from '../queries'\n\nconst mocks = [\n  {\n    request: {\n      query: CREATE_USER,\n      variables: {\n        username: 'Harri',\n        password: 'salainen',\n        passwordConf: 'salainen'\n      }\n    },\n    result: {\n      data: {\n        createUser: {\n          username: 'Harri',\n          password: 'salainen',\n          passwordConf: 'salainen'\n        }\n      }\n    }\n  },\n  {\n    request: {\n      query: LOGIN,\n      variables: {\n        username: 'Harri',\n        password: 'salainen',\n      }\n    },\n    result: {\n      data: {\n        login: {\n          value: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijc1NjFjNWE2LTc1NjYtNDA5Ny04NDUzLWM5MjU0NDE0ZTM5NyIsImVtYWlsIjoiaGVoZUBoZWhlLmZpIiwiaWF0IjoxNjIzNzY1NjkwLCJleHAiOjE2MjM3NjkyOTB9.WMQnhKrWbjqPxiieWsVMY4x5GA6pi91DM9zo5eo0GFY',\n        }\n      }\n    }\n  },\n  {\n    request: {\n      query: ME\n    },\n    result: {\n      data: {\n        me: {\n          username: 'Harri',\n        }\n      }\n    }\n  }\n]\n\nexport default mocks","import React from 'react'\nimport {\n  ApolloClient, ApolloProvider, HttpLink, InMemoryCache,\n} from '@apollo/client'\nimport { MockedProvider } from '@apollo/client/testing'\nimport { setContext } from 'apollo-link-context'\nimport mocks from './mocks'\n\nconst ENV = process.env.REACT_APP_ENV\n\nconst authLink = setContext((_, { headers }) => {\n  const token = localStorage.getItem('shop-user-token')\n  return {    \n    headers: {      \n      ...headers,      \n      authorization: token ? `bearer ${token}` : null,    \n    }  \n  }\n})\n\nconst httpLink = new HttpLink({ uri: '/graphql' })\n\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: authLink.concat(httpLink)\n})\n\nconst Provider = ({ children }) => {\n  if (ENV === 'test') {\n    return (\n      <MockedProvider\n        mocks={mocks}\n        defaultOptions={{\n          watchQuery: { fetchPolicy: 'no-cache' },\n          query: { fetchPolicy: 'no-cache' },\n        }}\n      >\n        <>{children}</>\n      </MockedProvider>\n    )\n  }\n\n  return (\n    <ApolloProvider client={client}>\n      <>{children}</>\n    </ApolloProvider>\n  )\n}\n\nexport default Provider","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\nimport {\n  BrowserRouter as Router,\n} from \"react-router-dom\"\nimport Provider from './config/provider'\n\nReactDOM.render(\n  <Provider>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}