(this["webpackJsonpverkkokauppa-frontend"]=this["webpackJsonpverkkokauppa-frontend"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var r,a,c,s,i,o,u,d,l,j,b,O,h,m,p,f=n(0),g=n(83),x=n.n(g),v=n(7),y=n(6),N=n(22),w=Object(y.gql)(r||(r=Object(N.a)(["\n  query allProductsByCategory($category: String){\n    allProducts(category: $category) {\n      name\n      price\n      quantity\n      id\n      categories\n      description\n      comments {\n        id\n        user\n        product\n        content\n        grade\n      }\n      units_sold\n      average_grade\n    }\n  }\n  "]))),A=Object(y.gql)(a||(a=Object(N.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      value\n    }\n  }\n"]))),S=Object(y.gql)(c||(c=Object(N.a)(["\nquery {\n  allCategories\n}\n"]))),k=Object(y.gql)(s||(s=Object(N.a)(["\n  query {\n    me {\n      username\n      id\n      cart {\n        productName\n        amount\n        price\n      }\n    }\n  }\n  "]))),C=Object(y.gql)(i||(i=Object(N.a)(["\n  mutation createUser($username: String!, $password: String!, $passwordConf: String!) {\n    createUser(username: $username, password: $password, passwordConf: $passwordConf) {\n      username\n    }\n  }\n"]))),q=Object(y.gql)(o||(o=Object(N.a)(["\n  mutation decreaseQuantity($name: String!, $quantity: Int!) {\n    decreaseQuantity(name: $name, quantity: $quantity) {\n      name\n      quantity\n    }\n  }\n"]))),E=(Object(y.gql)(u||(u=Object(N.a)(["\n  query findProduct($name: String!) {\n    findProduct(name: $name) {\n      name\n      price\n      quantity\n      average_grade\n    }\n  }\n"]))),Object(y.gql)(d||(d=Object(N.a)(["\n  mutation addComment($user: String!, $product: String!, $content: String! $grade: Int!) {\n    addComment(user: $user, product: $product, content: $content, grade: $grade) {\n      user\n      product\n      content\n      grade\n    }\n  }\n"])))),F=(Object(y.gql)(l||(l=Object(N.a)(["\n  query allCommentsByProduct($product: String){\n    allComments(product: $product) {\n      user\n      product\n      content\n    }\n  }\n"]))),Object(y.gql)(j||(j=Object(N.a)(["\n  mutation addToCart($productName: String!, $price: Float!) {\n    addToCart(productName: $productName, price: $price) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"])))),P=Object(y.gql)(b||(b=Object(N.a)(["\n  mutation removeFromCart($productName: String!) {\n    removeFromCart(productName: $productName) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"]))),L=(Object(y.gql)(O||(O=Object(N.a)(["\n  query {\n    totalPrice\n  }\n"]))),Object(y.gql)(h||(h=Object(N.a)(["\n  mutation {\n    checkout {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"])))),B=Object(y.gql)(m||(m=Object(N.a)(["\n  mutation removeComment($productId: String!) {\n    removeComment(productId: $productId) {\n      name\n      id\n    }\n  }\n"]))),G=Object(y.gql)(p||(p=Object(N.a)(["\n  mutation changePassword($oldPassword: String!, $newPassword: String!, $confirmNew: String!) {\n    changePassword(oldPassword: $oldPassword, newPassword: $newPassword, confirmNew: $confirmNew) {\n      username\n    }\n  }\n"]))),I=n(21),M=n.n(I),Q=n(35),T=(n(3),n(110)),U=n(113),R=n(112),J=n(1),D=function(e){var t=e.shownProduct,n=e.addToCart,r=e.setError,a=Object(f.useState)(""),c=Object(v.a)(a,2),s=c[0],i=c[1],o=Object(f.useState)([]),u=Object(v.a)(o,2),d=u[0],l=u[1],j=Object(f.useState)(null),b=Object(v.a)(j,2),O=b[0],h=b[1],m=Object(y.useQuery)(k),p=Object(f.useState)(!0),g=Object(v.a)(p,2),x=g[0],N=g[1],A=Object(f.useState)(null),S=Object(v.a)(A,2),C=S[0],q=S[1],F=Object(f.useState)(!0),P=Object(v.a)(F,2),L=P[0],G=P[1],I=Object(f.useState)(!0),D=Object(v.a)(I,2),Z=D[0],z=D[1],V=Object(y.useMutation)(E,{refetchQueries:[{query:w}],onError:function(e){r(e)}}),Y=Object(v.a)(V,2),K=Y[0],H=(Y[1],Object(y.useMutation)(B,{refetchQueries:[{query:w}],onError:function(e){r(e)}})),W=Object(v.a)(H,2),X=W[0];W[1];if(Object(f.useEffect)((function(){if(t&&localStorage.getItem("shop-user-token")&&document.getElementById("buy-button")){l(t.comments),d.length>0?G(!1):G(!0);var e=document.getElementById("buy-button");t.quantity<1?e.disabled=!0:e.disabled=!1}})),Object(f.useEffect)((function(){m.data&&m.data.me&&q(m.data.me.username)}),[m]),Object(f.useEffect)(Object(Q.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.data&&m.data.me&&t)){e.next=5;break}return e.next=3,d.filter((function(e){return e.user===m.data.me.username}));case 3:e.sent.length>0?N(!1):N(!0);case 5:case"end":return e.stop()}}),e)})))),m.loading)return Object(J.jsx)("div",{children:"loading..."});if(!t)return null;if(console.log("tuote ",t),console.log("kom",d.length),!localStorage.getItem("shop-user-token"))return Object(J.jsxs)("div",{children:[Object(J.jsx)("h2",{className:"midHeader",children:t.name}),Object(J.jsx)(T.a,{striped:!0,children:Object(J.jsxs)("tbody",{children:[Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"price"}),Object(J.jsx)("th",{children:"description"}),Object(J.jsx)("th",{children:"quantity"}),Object(J.jsx)("th",{children:"average grade"})]}),Object(J.jsxs)("tr",{children:[Object(J.jsxs)("td",{children:["$",t.price]}),Object(J.jsx)("td",{children:t.description}),Object(J.jsx)("td",{children:t.quantity}),Object(J.jsx)("td",{children:t.average_grade})]})]})}),"Log in to see the reviews for this product"]});var $=Object(J.jsx)(U.a,{className:"generalButton",id:"buy-button",onClick:function(){return n(t)},children:"add to cart"}),_=function(){var e=Object(Q.a)(M.a.mark((function e(n){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=t.id,K({variables:{user:C,product:r,content:s,grade:O}}),i(""),h(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(Q.a)(M.a.mark((function e(n){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Confirm to delete your review")&&(n.preventDefault(),r=t.id,X({variables:{productId:r}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te={display:Z?"none":""},ne={display:Z?"":"none"};return Object(J.jsxs)("div",{children:[Object(J.jsx)("h2",{className:"midHeader",children:t.name}),Object(J.jsx)(T.a,{striped:!0,children:Object(J.jsxs)("tbody",{children:[Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"price"}),Object(J.jsx)("th",{children:"description"}),Object(J.jsx)("th",{children:"quantity"}),Object(J.jsx)("th",{children:"average grade"}),Object(J.jsx)("th",{})]}),Object(J.jsxs)("tr",{children:[Object(J.jsxs)("td",{children:["$",t.price]}),Object(J.jsx)("td",{children:t.description}),Object(J.jsx)("td",{children:t.quantity}),Object(J.jsx)("td",{children:t.average_grade}),Object(J.jsx)("td",{children:$})]})]})}),!0===L&&Object(J.jsx)("div",{children:"This item has not been reviewed yet"}),!1===L&&Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{style:te,children:Object(J.jsx)(U.a,{className:"generalButton",id:"visibilityButton",onClick:function(){return z(!0)},children:"show comments"})}),Object(J.jsxs)("div",{style:ne,children:[Object(J.jsx)(U.a,{className:"generalButton",onClick:function(){return z(!1)},children:"hide comments"}),d.map((function(e){return Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:e.user})," gave grade ",Object(J.jsx)("b",{children:e.grade})," and commented:"]}),Object(J.jsx)("div",{className:"review",children:e.content}),Object(J.jsx)("div",{children:m.data.me.username===e.user&&Object(J.jsx)(R.a,{onSubmit:ee,children:Object(J.jsx)("div",{children:Object(J.jsx)(U.a,{type:"submit",className:"generalButton",children:"delete your review"})})})})]},e.id)}))]})]}),!1!==x&&Object(J.jsxs)(R.a,{onSubmit:_,children:[Object(J.jsx)("h3",{children:"Review this product"}),Object(J.jsx)(R.a.Label,{children:"Grade (1-5): "}),Object(J.jsx)("input",{id:"grade",type:"number",min:"1",max:"5",size:"1",value:O,onChange:function(e){var t=e.target;return h(parseInt(t.value))}}),Object(J.jsx)("br",{}),Object(J.jsx)("textarea",{value:s,id:"commentField",onChange:function(e){var t=e.target;return i(t.value)},className:"text",cols:"50",rows:"5"}),Object(J.jsx)("div",{children:Object(J.jsx)(U.a,{className:"generalButton",id:"submitReview",type:"submit",children:"Review this product"})})]})]})},Z=n(15),z=function(e){var t=e.myCart,n=e.setMyCart,r=e.addToCart,a=e.setError,c=Object(y.useQuery)(S),s=Object(y.useLazyQuery)(w),i=Object(v.a)(s,2),o=i[0],u=i[1],d=Object(f.useState)(""),l=Object(v.a)(d,2),j=(l[0],l[1]),b=Object(f.useState)([]),O=Object(v.a)(b,2),h=O[0],m=O[1],p=Object(f.useState)([]),g=Object(v.a)(p,2),x=g[0],N=g[1],A=Object(f.useState)([]),k=Object(v.a)(A,2),C=k[0],q=k[1],E=Object(f.useState)(""),F=Object(v.a)(E,2),P=F[0],L=F[1];Object(f.useEffect)((function(){c.data&&(m(c.data.allCategories),o())}),[c,o]),Object(f.useEffect)((function(){u.data&&(N(u.data.allProducts),q(u.data.allProducts))}),[u]);var B=Object(Z.g)("/products/:id"),G=B?x.find((function(e){return e.id===B.params.id})):null;if(c.loading||u.loading)return Object(J.jsx)("div",{children:"loading..."});var I=function(e){o({variables:{category:e}}),j(e||"")},M={buttonStyle:{marginTop:"3px",marginBottom:"5px",marginRight:"10px",marginLeft:"10px"}};return Object(J.jsxs)("div",{className:"bottomPadding",children:[Object(J.jsx)(Z.c,{children:Object(J.jsx)(Z.a,{path:"/products/:id",children:Object(J.jsx)(D,{shownProduct:G,myCart:t,setMyCart:n,addToCart:r,setError:a})})}),Object(J.jsx)("h2",{className:"midHeader",children:"Search products by category"}),Object(J.jsxs)("div",{className:"navBar",children:[h.map((function(e){return Object(J.jsx)(U.a,{className:"categoryButton",style:M.buttonStyle,onClick:function(){return I(e)},children:e})})),Object(J.jsx)(U.a,{className:"categoryButton",style:M.buttonStyle,onClick:function(){return I("")},children:"trending"})]}),Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{className:"float-child",children:["Search product by name:",Object(J.jsx)("input",{type:"text",min:"1",max:"48",onChange:function(e){var t=e.target;return L(t.value)}})]}),Object(J.jsxs)("div",{className:"float-child",children:["Show products with grade at least",Object(J.jsx)("input",{type:"number",min:"1",max:"5",size:"2",onChange:function(e){return function(e){var t=x.filter((function(t){return t.average_grade>=e}));q(t)}(e.target.value)}})]})]}),Object(J.jsx)(T.a,{striped:!0,children:Object(J.jsxs)("tbody",{children:[Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{}),Object(J.jsx)("th",{children:"price"}),Object(J.jsx)("th",{children:"quantity"})]}),C.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())})).map((function(e){return Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:Object(J.jsx)("a",{className:"textLink",id:e.id,href:"/products/".concat(e.id),children:e.name})}),Object(J.jsxs)("td",{children:["$",e.price]}),Object(J.jsx)("td",{children:e.quantity})]},e.name)}))]})})]})},V=function(e){var t=e.setToken,n=e.setNotification,r=Object(f.useState)(""),a=Object(v.a)(r,2),c=a[0],s=a[1],i=Object(f.useState)(""),o=Object(v.a)(i,2),u=o[0],d=o[1],l=Object(Z.f)(),j=Object(y.useMutation)(A,{refetchQueries:[{query:k}],onError:function(e){n("Invalid credentials"),setTimeout((function(){n("")}),1e4)}}),b=Object(v.a)(j,2),O=b[0],h=b[1];Object(f.useEffect)((function(){if(h.data){var e=h.data.login.value;t(e),localStorage.setItem("shop-user-token",e),localStorage.setItem("username",c),l.push("/"),window.location.reload()}}),[h.data]);var m=function(){var e=Object(Q.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),O({variables:{username:c,password:u}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:"bottomPadding",children:[Object(J.jsx)("h2",{children:"Login"}),Object(J.jsx)(R.a,{onSubmit:m,children:Object(J.jsxs)(R.a.Group,{children:[Object(J.jsx)(R.a.Label,{children:"username:"}),Object(J.jsx)(R.a.Control,{className:"textField",id:"username",type:"text",value:c,onChange:function(e){var t=e.target;return s(t.value)}}),Object(J.jsx)(R.a.Label,{children:"password:"}),Object(J.jsx)(R.a.Control,{className:"textField",id:"password",type:"password",value:u,onChange:function(e){var t=e.target;return d(t.value)}}),Object(J.jsx)(U.a,{className:"generalButton",id:"login-button",type:"submit",children:"login"})]})}),Object(J.jsxs)("p",{children:["New user? Register ",Object(J.jsx)("a",{id:"register-link",href:"/register",children:"here"})]})]})},Y=function(e){var t=e.setNotification,n=Object(f.useState)(""),r=Object(v.a)(n,2),a=r[0],c=r[1],s=Object(f.useState)(""),i=Object(v.a)(s,2),o=i[0],u=i[1],d=Object(f.useState)(""),l=Object(v.a)(d,2),j=l[0],b=l[1],O=Object(Z.f)(),h=Object(y.useMutation)(C,{onError:function(e){t("Registration failed"),setTimeout((function(){t("")}),1e4)}}),m=Object(v.a)(h,2),p=m[0],g=m[1];Object(f.useEffect)((function(){g.data&&(c(""),u(""),b(""),O.push("/login"))}),[g.data]);var x=function(){var e=Object(Q.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),p({variables:{username:a,password:o,passwordConf:j}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:"bottomPadding",children:[Object(J.jsx)("h2",{children:"Create a new account"}),Object(J.jsx)(R.a,{onSubmit:x,children:Object(J.jsxs)(R.a.Group,{children:[Object(J.jsx)(R.a.Label,{children:"username:"}),Object(J.jsx)(R.a.Control,{className:"textField",id:"username",required:!0,minLength:"3",maxLength:"16",type:"text",value:a,onChange:function(e){var t=e.target;return c(t.value)}}),Object(J.jsx)(R.a.Label,{children:"password:"}),Object(J.jsx)(R.a.Control,{className:"textField",id:"password",required:!0,minLength:"8",maxLength:"32",type:"password",value:o,onChange:function(e){var t=e.target;return u(t.value)}}),Object(J.jsx)(R.a.Label,{children:"password confirmation:"}),Object(J.jsx)(R.a.Control,{className:"textField",id:"passwordConf",required:!0,minLength:"8",maxLength:"32",type:"password",value:j,onChange:function(e){var t=e.target;return b(t.value)}}),Object(J.jsx)(U.a,{className:"generalButton",id:"register-button",type:"submit",children:"register"})]})})]})},K=function(e){var t=e.user,n=e.setNotification,r=e.setError,a=Object(f.useState)([]),c=Object(v.a)(a,2),s=c[0],i=c[1],o=Object(y.useMutation)(P,{refetchQueries:[{query:k}],onError:function(e){r(e)}}),u=Object(v.a)(o,2),d=u[0],l=(u[1],Object(y.useMutation)(L,{refetchQueries:[{query:k}],onError:function(e){r(e)}})),j=Object(v.a)(l,2),b=j[0];j[1];if(Object(f.useEffect)((function(){i(t.cart)})),s<1)return Object(J.jsxs)("div",{className:"bottomPadding",children:[Object(J.jsx)("h2",{children:"Your shopping cart"}),"Your shopping cart is currently empty."]});var O=0;s.map((function(e){return O+=e.price*e.amount})),O=O.toFixed(2);var h=function(){var e=Object(Q.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Confirm your purchase of $".concat(O)))for(t=0;t<s.length;t++)b(),n("Your purchase was successful"),setTimeout((function(){n("")}),5e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:"bottomPadding",children:[Object(J.jsx)("h2",{children:"Your shopping cart"}),Object(J.jsx)(T.a,{striped:!0,children:Object(J.jsxs)("tbody",{children:[Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{}),Object(J.jsx)("th",{children:"price per unit"}),Object(J.jsx)("th",{children:"amount"}),Object(J.jsx)("th",{})]}),s.map((function(e){return Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:e.productName}),Object(J.jsxs)("td",{children:["$",e.price]}),Object(J.jsx)("td",{children:e.amount}),Object(J.jsx)("td",{children:Object(J.jsx)(U.a,{className:"generalButton",onClick:function(){return function(e){var t=e.productName;d({variables:{productName:t}}),n("Removed ".concat(t," from cart")),setTimeout((function(){n("")}),5e3),O=-e.price}(e)},children:"remove"})})]},e.product)})),Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"grand total:"}),Object(J.jsxs)("th",{children:["$",O]})]})]})}),Object(J.jsx)(U.a,{className:"generalButton",onClick:function(){return h()},children:"checkout"})]})},H=function(e){var t=e.message;return""===t?null:t.match("^Added")||t.match("^Your purchase was successful")||t.match("^Password updated")?Object(J.jsx)("div",{className:"addProd",children:t}):(t.match("^Removed")||t.match("^Make")||t.match("^Invalid"),Object(J.jsx)("div",{className:"removeProd",children:t}))},W=function(e){var t=e.setNotification,n=Object(f.useState)(""),r=Object(v.a)(n,2),a=r[0],c=r[1],s=Object(f.useState)(""),i=Object(v.a)(s,2),o=i[0],u=i[1],d=Object(f.useState)(""),l=Object(v.a)(d,2),j=l[0],b=l[1],O=Object(y.useMutation)(G,{refetchQueries:[{query:k}],onError:function(e){t("Invalid input"),setTimeout((function(){t("")}),1e4)}}),h=Object(v.a)(O,2),m=h[0],p=h[1];Object(f.useEffect)((function(){p.data&&(c(""),u(""),b(""),t("Password updated successfully"),setTimeout((function(){t("")}),1e4))}),[p.data]);return p.loading?Object(J.jsx)("div",{children:"loading..."}):Object(J.jsxs)("div",{children:[Object(J.jsx)("h2",{children:"User settings"}),Object(J.jsx)(R.a,{onSubmit:function(e){e.preventDefault(),m({variables:{oldPassword:a,newPassword:o,confirmNew:j}})},children:Object(J.jsxs)(R.a.Group,{children:[Object(J.jsx)(R.a.Label,{children:"Old password:"}),Object(J.jsx)(R.a.Control,{className:"textField",id:"oldPassword",type:"password",value:a,onChange:function(e){var t=e.target;return c(t.value)}}),Object(J.jsx)(R.a.Label,{children:"New password:"}),Object(J.jsx)(R.a.Control,{className:"textField",id:"newPassword",type:"password",value:o,onChange:function(e){var t=e.target;return u(t.value)}}),Object(J.jsx)(R.a.Label,{children:"Confirm new password:"}),Object(J.jsx)(R.a.Control,{className:"textField",id:"confirmNew",type:"password",value:j,onChange:function(e){var t=e.target;return b(t.value)}}),Object(J.jsx)(U.a,{className:"generalButton",id:"change-button",type:"submit",children:"submit"})]})})]})},X=function(e){var t=e.logout,n={paddingRight:5};return localStorage.getItem("shop-user-token")?Object(J.jsxs)("div",{className:"menuBar",children:[Object(J.jsx)("a",{className:"menuLinkLogged",href:"/products",id:"products",style:n,children:"products"}),Object(J.jsx)("a",{className:"menuLinkLogged",href:"/shopping-cart",id:"cart",style:n,children:"shopping cart"}),Object(J.jsx)("a",{className:"menuLinkLogged",href:"/settings",id:"settings",style:n,children:"user settings"}),Object(J.jsx)("a",{className:"menuLinkLogged",href:"/",id:"logout",onClick:t,children:"logout"})]}):Object(J.jsxs)("div",{className:"menuBar",children:[Object(J.jsx)("a",{className:"menuLink",href:"/products",id:"products",style:n,children:"products"}),Object(J.jsx)("a",{className:"menuLink",href:"/login",id:"login",style:n,children:"login"}),Object(J.jsx)("a",{className:"menuLink",href:"/register",style:n,children:"register"})]})},$="data:image/png;base64,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",_=n(111),ee=function(){var e=Object(f.useState)(""),t=Object(v.a)(e,2),n=(t[0],t[1]),r=Object(f.useState)(""),a=Object(v.a)(r,2),c=a[0],s=a[1],i=Object(y.useQuery)(k),o=Object(y.useMutation)(q,{refetchQueries:[{query:w}],onError:function(e){A(e)}}),u=Object(v.a)(o,2),d=(u[0],u[1],Object(y.useMutation)(F,{refetchQueries:[{query:w}],onError:function(e){A(e)}})),l=Object(v.a)(d,2),j=l[0],b=(l[1],Object(f.useState)(null)),O=Object(v.a)(b,2),h=(O[0],O[1]),m=Object(y.useApolloClient)(),p=Object(f.useState)([]),g=Object(v.a)(p,2),x=g[0],N=g[1];document.title="Pennywise Web Store";var A=function(e){n(e),setTimeout((function(){n("")}),1e4)};if(i.loading)return Object(J.jsx)("div",{children:"loading..."});return localStorage.getItem("shop-user-token")?Object(J.jsxs)("div",{className:"container",children:[Object(J.jsxs)("div",{className:"header",children:[Object(J.jsx)(_.a,{src:$,className:"logoDetails"}),Object(J.jsx)("h1",{children:"Pennywise Web Store"})]}),Object(J.jsx)(H,{message:c}),Object(J.jsx)(X,{logout:function(){h(null),localStorage.clear(),m.resetStore()}}),Object(J.jsxs)(Z.c,{children:[Object(J.jsx)(Z.a,{path:"/shopping-cart",children:Object(J.jsx)(K,{user:i.data.me,setNotification:s,setError:A})}),Object(J.jsx)(Z.a,{path:"/products",children:Object(J.jsx)(z,{myCart:x,setMyCart:N,addToCart:function(e){var t=e.name,n=e.price;j({variables:{productName:t,price:n}}),s("Added ".concat(t," to cart")),setTimeout((function(){s("")}),5e3)},setError:A})}),Object(J.jsx)(Z.a,{path:"/settings",children:Object(J.jsx)(W,{setNotification:s})})]})]}):Object(J.jsxs)("div",{className:"container",children:[Object(J.jsxs)("div",{className:"header",children:[Object(J.jsx)(_.a,{src:$,className:"logoDetails"}),Object(J.jsx)("h1",{children:"Pennywise Web Store"})]}),Object(J.jsx)(H,{message:c}),Object(J.jsx)(X,{}),Object(J.jsxs)(Z.c,{children:[Object(J.jsx)(Z.a,{path:"/login",children:Object(J.jsx)(V,{setToken:h,setNotification:s})}),Object(J.jsx)(Z.a,{path:"/register",children:Object(J.jsx)(Y,{setNotification:s})}),Object(J.jsx)(Z.a,{path:"/products",children:Object(J.jsx)(z,{})})]})]})},te=(n(107),n(46)),ne=n(67),re=n(86),ae=n(87),ce=[{request:{query:C,variables:{username:"Harri",password:"salainen",passwordConf:"salainen"}},result:{data:{createUser:{username:"Harri",password:"salainen",passwordConf:"salainen"}}}},{request:{query:A,variables:{username:"Harri",password:"salainen"}},result:{data:{login:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijc1NjFjNWE2LTc1NjYtNDA5Ny04NDUzLWM5MjU0NDE0ZTM5NyIsImVtYWlsIjoiaGVoZUBoZWhlLmZpIiwiaWF0IjoxNjIzNzY1NjkwLCJleHAiOjE2MjM3NjkyOTB9.WMQnhKrWbjqPxiieWsVMY4x5GA6pi91DM9zo5eo0GFY"}}}},{request:{query:k},result:{data:{me:{username:"Harri"}}}},{request:{query:S},result:{data:{allCategories:["electronics","clothing"]}}},{request:{query:w},result:{data:{allProducts:[{_typename:"Product",name:"Two sizes too big, faded Taz t-shirt",price:17.45,quantity:5,units_sold:0,average_grade:null,description:"Guaranteed to be ill-fitting",comments:[],categories:["clothing"],id:"ff28rj292fkfljf92"},{_typename:"Product",name:"Color TV",price:399.95,quantity:2,units_sold:0,average_grade:null,comments:[],categories:["electronics"],id:"ff28rj2929fjf92"}]}}},{request:{query:E,variables:{user:"Harri",product:"ff28rj292fkfljf92",content:"Oli ihan liian piukka",grade:2}},result:{data:{addComment:{user:"Harri",product:"ff28rj292fkfljf92",content:"Oli ihan liian piukka",grade:2}}}}],se=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENV,ie=Object(ae.a)((function(e,t){var n=t.headers,r=localStorage.getItem("shop-user-token");return{headers:Object(ne.a)(Object(ne.a)({},n),{},{authorization:r?"bearer ".concat(r):null})}})),oe=new y.HttpLink({uri:"/graphql"}),ue=new y.ApolloClient({cache:new y.InMemoryCache,link:ie.concat(oe)}),de=function(e){var t=e.children;return"test"===se?Object(J.jsx)(re.a,{mocks:ce,defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}},children:Object(J.jsx)(J.Fragment,{children:t})}):Object(J.jsx)(y.ApolloProvider,{client:ue,children:Object(J.jsx)(J.Fragment,{children:t})})};x.a.render(Object(J.jsx)(de,{children:Object(J.jsx)(te.a,{children:Object(J.jsx)(ee,{})})}),document.getElementById("root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.1e4c6ab7.chunk.js.map