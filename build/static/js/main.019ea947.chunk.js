(this["webpackJsonpverkkokauppa-frontend"]=this["webpackJsonpverkkokauppa-frontend"]||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var a,r,c,s,i,o,u,d,l,j,b,O,h,m,p,g,x=n(0),f=n(85),v=n.n(f),y=n(5),N=n(6),w=n(20),A=Object(N.gql)(a||(a=Object(w.a)(["\n  query allProductsByCategory($category: String){\n    allProducts(category: $category) {\n      name\n      price\n      quantity\n      id\n      categories\n      description\n      comments {\n        id\n        user\n        product\n        content\n        grade\n      }\n      units_sold\n      average_grade\n    }\n  }\n  "]))),S=Object(N.gql)(r||(r=Object(w.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      value\n    }\n  }\n"]))),C=Object(N.gql)(c||(c=Object(w.a)(["\nquery {\n  allCategories\n}\n"]))),k=Object(N.gql)(s||(s=Object(w.a)(["\n  query {\n    me {\n      username\n      id\n      cart {\n        productName\n        amount\n        price\n      }\n      role\n    }\n  }\n  "]))),q=Object(N.gql)(i||(i=Object(w.a)(["\n  mutation createUser($username: String!, $password: String!, $passwordConf: String!) {\n    createUser(username: $username, password: $password, passwordConf: $passwordConf) {\n      username\n    }\n  }\n"]))),L=Object(N.gql)(o||(o=Object(w.a)(["\n  mutation decreaseQuantity($name: String!, $quantity: Int!) {\n    decreaseQuantity(name: $name, quantity: $quantity) {\n      name\n      quantity\n    }\n  }\n"]))),F=(Object(N.gql)(u||(u=Object(w.a)(["\n  query findProduct($name: String!) {\n    findProduct(name: $name) {\n      name\n      price\n      quantity\n      average_grade\n    }\n  }\n"]))),Object(N.gql)(d||(d=Object(w.a)(["\n  mutation addComment($user: String!, $product: String!, $content: String! $grade: Int!) {\n    addComment(user: $user, product: $product, content: $content, grade: $grade) {\n      user\n      product\n      content\n      grade\n    }\n  }\n"])))),E=(Object(N.gql)(l||(l=Object(w.a)(["\n  query allCommentsByProduct($product: String){\n    allComments(product: $product) {\n      user\n      product\n      content\n    }\n  }\n"]))),Object(N.gql)(j||(j=Object(w.a)(["\n  mutation addToCart($productName: String!, $price: Float!) {\n    addToCart(productName: $productName, price: $price) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"])))),P=Object(N.gql)(b||(b=Object(w.a)(["\n  mutation removeFromCart($productName: String!) {\n    removeFromCart(productName: $productName) {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"]))),B=(Object(N.gql)(O||(O=Object(w.a)(["\n  query {\n    totalPrice\n  }\n"]))),Object(N.gql)(h||(h=Object(w.a)(["\n  mutation {\n    checkout {\n      username\n      cart {\n        productName\n        price\n        amount\n      }\n    }\n  }\n"])))),G=Object(N.gql)(m||(m=Object(w.a)(["\n  mutation removeComment($productId: String!) {\n    removeComment(productId: $productId) {\n      name\n      id\n    }\n  }\n"]))),I=Object(N.gql)(p||(p=Object(w.a)(["\n  mutation changePassword($oldPassword: String!, $newPassword: String!, $confirmNew: String!) {\n    changePassword(oldPassword: $oldPassword, newPassword: $newPassword, confirmNew: $confirmNew) {\n      username\n    }\n  }\n"]))),M=Object(N.gql)(g||(g=Object(w.a)(["\n  mutation addProduct($name: String!, $price: Float!, $quantity: Int!, $categories: [String!]!, $description: String) {\n    addProduct(name: $name, price: $price, quantity: $quantity, categories: $categories, description: $description) {\n      name\n    }\n  }\n"]))),Q=n(23),T=n.n(Q),U=n(36),R=n(113),D=n(116),J=n(115),Z=n(1),z=function(e){var t=e.shownProduct,n=e.addToCart,a=e.setError,r=Object(x.useState)(""),c=Object(y.a)(r,2),s=c[0],i=c[1],o=Object(x.useState)([]),u=Object(y.a)(o,2),d=u[0],l=u[1],j=Object(x.useState)(null),b=Object(y.a)(j,2),O=b[0],h=b[1],m=Object(N.useQuery)(k),p=Object(x.useState)(!0),g=Object(y.a)(p,2),f=g[0],v=g[1],w=Object(x.useState)(null),S=Object(y.a)(w,2),C=S[0],q=S[1],L=Object(x.useState)(!0),E=Object(y.a)(L,2),P=E[0],B=E[1],I=Object(x.useState)(!0),M=Object(y.a)(I,2),Q=M[0],z=M[1],V=Object(N.useMutation)(F,{refetchQueries:[{query:A}],onError:function(e){a(e)}}),Y=Object(y.a)(V,2),K=Y[0],H=(Y[1],Object(N.useMutation)(G,{refetchQueries:[{query:A}],onError:function(e){a(e)}})),W=Object(y.a)(H,2),X=W[0];W[1];if(Object(x.useEffect)((function(){if(t&&localStorage.getItem("shop-user-token")&&document.getElementById("buy-button")){l(t.comments),d.length>0?B(!1):B(!0);var e=document.getElementById("buy-button");t.quantity<1?e.disabled=!0:e.disabled=!1}})),Object(x.useEffect)((function(){m.data&&m.data.me&&q(m.data.me.username)}),[m]),Object(x.useEffect)(Object(U.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.data&&m.data.me&&t)){e.next=5;break}return e.next=3,d.filter((function(e){return e.user===m.data.me.username}));case 3:e.sent.length>0?v(!1):v(!0);case 5:case"end":return e.stop()}}),e)})))),m.loading)return Object(Z.jsx)("div",{children:"loading..."});if(!t)return null;if(console.log("tuote ",t),console.log("kom",d.length),!localStorage.getItem("shop-user-token"))return Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h2",{className:"midHeader",children:t.name}),Object(Z.jsx)(R.a,{striped:!0,children:Object(Z.jsxs)("tbody",{children:[Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{children:"price"}),Object(Z.jsx)("th",{children:"description"}),Object(Z.jsx)("th",{children:"quantity"}),Object(Z.jsx)("th",{children:"average grade"})]}),Object(Z.jsxs)("tr",{children:[Object(Z.jsxs)("td",{children:["$",t.price]}),Object(Z.jsx)("td",{children:t.description}),Object(Z.jsx)("td",{children:t.quantity}),Object(Z.jsx)("td",{children:t.average_grade})]})]})}),"Log in to see the reviews for this product"]});var $=Object(Z.jsx)(D.a,{className:"generalButton",id:"buy-button",onClick:function(){return n(t)},children:"add to cart"}),_=function(){var e=Object(U.a)(T.a.mark((function e(n){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a=t.id,K({variables:{user:C,product:a,content:s,grade:O}}),i(""),h(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(U.a)(T.a.mark((function e(n){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Confirm to delete your review")&&(n.preventDefault(),a=t.id,X({variables:{productId:a}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te={display:Q?"none":""},ne={display:Q?"":"none"};return Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h2",{className:"midHeader",children:t.name}),Object(Z.jsx)(R.a,{striped:!0,children:Object(Z.jsxs)("tbody",{children:[Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{children:"price"}),Object(Z.jsx)("th",{children:"description"}),Object(Z.jsx)("th",{children:"quantity"}),Object(Z.jsx)("th",{children:"average grade"}),Object(Z.jsx)("th",{})]}),Object(Z.jsxs)("tr",{children:[Object(Z.jsxs)("td",{children:["$",t.price]}),Object(Z.jsx)("td",{children:t.description}),Object(Z.jsx)("td",{children:t.quantity}),Object(Z.jsx)("td",{children:t.average_grade}),Object(Z.jsx)("td",{children:$})]})]})}),!0===P&&Object(Z.jsx)("div",{children:"This item has not been reviewed yet"}),!1===P&&Object(Z.jsxs)("div",{children:[Object(Z.jsx)("div",{style:te,children:Object(Z.jsx)(D.a,{className:"generalButton",id:"visibilityButton",onClick:function(){return z(!0)},children:"show comments"})}),Object(Z.jsxs)("div",{style:ne,children:[Object(Z.jsx)(D.a,{className:"generalButton",onClick:function(){return z(!1)},children:"hide comments"}),d.map((function(e){return Object(Z.jsxs)("div",{children:[Object(Z.jsxs)("div",{children:[Object(Z.jsx)("b",{children:e.user})," gave grade ",Object(Z.jsx)("b",{children:e.grade})," and commented:"]}),Object(Z.jsx)("div",{className:"review",children:e.content}),Object(Z.jsx)("div",{children:m.data.me.username===e.user&&Object(Z.jsx)(J.a,{onSubmit:ee,children:Object(Z.jsx)("div",{children:Object(Z.jsx)(D.a,{type:"submit",className:"generalButton",children:"delete your review"})})})})]},e.id)}))]})]}),!1!==f&&Object(Z.jsxs)(J.a,{onSubmit:_,children:[Object(Z.jsx)("h3",{children:"Review this product"}),Object(Z.jsx)(J.a.Label,{children:"Grade (1-5): "}),Object(Z.jsx)("input",{required:!0,id:"grade",type:"number",min:"1",max:"5",size:"1",value:O,onChange:function(e){var t=e.target;return h(parseInt(t.value))}}),Object(Z.jsx)("br",{}),Object(Z.jsx)("textarea",{required:!0,value:s,id:"commentField",onChange:function(e){var t=e.target;return i(t.value)},className:"text",cols:"50",rows:"5"}),Object(Z.jsx)("div",{children:Object(Z.jsx)(D.a,{className:"generalButton",id:"submitReview",type:"submit",children:"Review this product"})})]})]})},V=n(15),Y=n(16),K=function(e){var t=e.myCart,n=e.setMyCart,a=e.addToCart,r=e.setError,c=Object(N.useQuery)(C),s=Object(N.useLazyQuery)(A),i=Object(y.a)(s,2),o=i[0],u=i[1],d=Object(x.useState)(""),l=Object(y.a)(d,2),j=(l[0],l[1]),b=Object(x.useState)([]),O=Object(y.a)(b,2),h=O[0],m=O[1],p=Object(x.useState)([]),g=Object(y.a)(p,2),f=g[0],v=g[1],w=Object(x.useState)([]),S=Object(y.a)(w,2),k=S[0],q=S[1],L=Object(x.useState)(""),F=Object(y.a)(L,2),E=F[0],P=F[1];Object(x.useEffect)((function(){c.data&&(m(c.data.allCategories),o())}),[c,o]),Object(x.useEffect)((function(){u.data&&(v(u.data.allProducts),q(u.data.allProducts))}),[u]);var B=Object(V.g)("/products/:id"),G=B?f.find((function(e){return e.id===B.params.id})):null;if(c.loading||u.loading)return Object(Z.jsx)("div",{children:"loading..."});var I=function(e){o({variables:{category:e}}),j(e||"")},M={buttonStyle:{marginTop:"3px",marginBottom:"5px",marginRight:"10px",marginLeft:"10px"}};return Object(Z.jsxs)("div",{className:"bottomPadding",children:[Object(Z.jsx)(V.c,{children:Object(Z.jsx)(V.a,{path:"/products/:id",children:Object(Z.jsx)(z,{shownProduct:G,myCart:t,setMyCart:n,addToCart:a,setError:r})})}),Object(Z.jsx)("h2",{className:"midHeader",children:"Search products by category"}),Object(Z.jsxs)("div",{className:"navBar",children:[h.map((function(e){return Object(Z.jsx)(D.a,{className:"categoryButton",style:M.buttonStyle,onClick:function(){return I(e)},children:e})})),Object(Z.jsx)(D.a,{className:"categoryButton",style:M.buttonStyle,onClick:function(){return I("")},children:"trending"})]}),Object(Z.jsxs)("div",{children:[Object(Z.jsxs)("div",{className:"float-child",children:["Search product by name:",Object(Z.jsx)("input",{id:"nameFilter",type:"text",min:"1",max:"48",onChange:function(e){var t=e.target;return P(t.value)}})]}),Object(Z.jsxs)("div",{className:"float-child",children:["Show products with grade at least",Object(Z.jsx)("input",{id:"gradeFilter",type:"number",min:"1",max:"5",size:"2",onChange:function(e){return function(e){var t=f.filter((function(t){return t.average_grade>=e}));q(t)}(e.target.value)}})]})]}),Object(Z.jsx)(R.a,{striped:!0,children:Object(Z.jsxs)("tbody",{children:[Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{}),Object(Z.jsx)("th",{children:"price"}),Object(Z.jsx)("th",{children:"quantity"})]}),k.filter((function(e){return e.name.toLowerCase().includes(E.toLowerCase())})).map((function(e){return Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("td",{children:Object(Z.jsx)(Y.b,{className:"textLink",id:e.id,to:"/products/".concat(e.id),children:e.name})}),Object(Z.jsxs)("td",{children:["$",e.price]}),Object(Z.jsx)("td",{children:e.quantity})]},e.name)}))]})})]})},H=function(e){var t=e.setNotification,n=Object(x.useState)(""),a=Object(y.a)(n,2),r=a[0],c=a[1],s=Object(x.useState)(""),i=Object(y.a)(s,2),o=i[0],u=i[1],d=Object(V.f)(),l=Object(N.useMutation)(S,{refetchQueries:[{query:k}],onError:function(e){t("Invalid credentials"),setTimeout((function(){t("")}),1e4)}}),j=Object(y.a)(l,2),b=j[0],O=j[1];Object(x.useEffect)((function(){if(O.data){var e=O.data.login.value;localStorage.setItem("shop-user-token",e),localStorage.setItem("username",r),d.push("/"),window.location.reload()}}),[O.data]);var h=function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),b({variables:{username:r,password:o}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"bottomPadding",children:[Object(Z.jsx)("h2",{children:"Login"}),Object(Z.jsx)(J.a,{onSubmit:h,children:Object(Z.jsxs)(J.a.Group,{children:[Object(Z.jsx)(J.a.Label,{children:"username:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"username",type:"text",value:r,onChange:function(e){var t=e.target;return c(t.value)}}),Object(Z.jsx)(J.a.Label,{children:"password:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"password",type:"password",value:o,onChange:function(e){var t=e.target;return u(t.value)}}),Object(Z.jsx)(D.a,{className:"generalButton",id:"login-button",type:"submit",children:"login"})]})}),Object(Z.jsxs)("p",{children:["New user? Register ",Object(Z.jsx)(Y.b,{id:"register-link",to:"/register",children:"here"})]})]})},W=function(e){var t=e.setNotification,n=Object(x.useState)(""),a=Object(y.a)(n,2),r=a[0],c=a[1],s=Object(x.useState)(""),i=Object(y.a)(s,2),o=i[0],u=i[1],d=Object(x.useState)(""),l=Object(y.a)(d,2),j=l[0],b=l[1],O=Object(V.f)(),h=Object(N.useMutation)(q,{onError:function(e){t("Registration failed"),setTimeout((function(){t("")}),1e4)}}),m=Object(y.a)(h,2),p=m[0],g=m[1];Object(x.useEffect)((function(){g.data&&(c(""),u(""),b(""),O.push("/login"))}),[g.data]);var f=function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),p({variables:{username:r,password:o,passwordConf:j}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"bottomPadding",children:[Object(Z.jsx)("h2",{children:"Create a new account"}),Object(Z.jsx)(J.a,{onSubmit:f,children:Object(Z.jsxs)(J.a.Group,{children:[Object(Z.jsx)(J.a.Label,{children:"username:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"username",required:!0,minLength:"3",maxLength:"16",type:"text",value:r,onChange:function(e){var t=e.target;return c(t.value)}}),Object(Z.jsx)(J.a.Label,{children:"password:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"password",required:!0,minLength:"8",maxLength:"32",type:"password",value:o,onChange:function(e){var t=e.target;return u(t.value)}}),Object(Z.jsx)(J.a.Label,{children:"password confirmation:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"passwordConf",required:!0,minLength:"8",maxLength:"32",type:"password",value:j,onChange:function(e){var t=e.target;return b(t.value)}}),Object(Z.jsx)(D.a,{className:"generalButton",id:"register-button",type:"submit",children:"register"})]})})]})},X=function(e){var t=e.user,n=e.setNotification,a=e.setError,r=Object(x.useState)([]),c=Object(y.a)(r,2),s=c[0],i=c[1],o=Object(N.useMutation)(P,{refetchQueries:[{query:k}],onError:function(e){a(e)}}),u=Object(y.a)(o,2),d=u[0],l=(u[1],Object(N.useMutation)(B,{refetchQueries:[{query:k}],onError:function(e){a(e)}})),j=Object(y.a)(l,2),b=j[0];j[1];if(Object(x.useEffect)((function(){i(t.cart)})),s<1)return Object(Z.jsxs)("div",{className:"bottomPadding",children:[Object(Z.jsx)("h2",{children:"Your shopping cart"}),"Your shopping cart is currently empty."]});var O=0;s.map((function(e){return O+=e.price*e.amount})),O=O.toFixed(2);var h=function(){var e=Object(U.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Confirm your purchase of $".concat(O)))for(t=0;t<s.length;t++)b(),n("Your purchase was successful"),setTimeout((function(){n("")}),5e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"bottomPadding",children:[Object(Z.jsx)("h2",{children:"Your shopping cart"}),Object(Z.jsx)(R.a,{striped:!0,children:Object(Z.jsxs)("tbody",{children:[Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{}),Object(Z.jsx)("th",{children:"price per unit"}),Object(Z.jsx)("th",{children:"amount"}),Object(Z.jsx)("th",{})]}),s.map((function(e){return Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("td",{children:e.productName}),Object(Z.jsxs)("td",{children:["$",e.price]}),Object(Z.jsx)("td",{children:e.amount}),Object(Z.jsx)("td",{children:Object(Z.jsx)(D.a,{className:"generalButton",onClick:function(){return function(e){var t=e.productName;d({variables:{productName:t}}),n("Removed ".concat(t," from cart")),setTimeout((function(){n("")}),5e3),O=-e.price}(e)},children:"remove"})})]},e.product)})),Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{children:"grand total:"}),Object(Z.jsxs)("th",{children:["$",O]})]})]})}),Object(Z.jsx)(D.a,{className:"generalButton",onClick:function(){return h()},children:"checkout"})]})},$=function(e){var t=e.message;return console.log("MES ",t),""===t?null:t.match("^Added")||t.match("^Your purchase was successful")||t.match("^Password updated")||t.match("^New")?Object(Z.jsx)("div",{className:"addProd",children:t}):(t.match("^Removed")||t.match("^Make")||t.match("^Invalid"),Object(Z.jsx)("div",{className:"removeProd",children:t}))},_=function(e){var t=e.setNotification,n=Object(x.useState)(""),a=Object(y.a)(n,2),r=a[0],c=a[1],s=Object(x.useState)(""),i=Object(y.a)(s,2),o=i[0],u=i[1],d=Object(x.useState)(""),l=Object(y.a)(d,2),j=l[0],b=l[1],O=Object(N.useMutation)(I,{refetchQueries:[{query:k}],onError:function(e){t("Invalid input"),setTimeout((function(){t("")}),1e4)}}),h=Object(y.a)(O,2),m=h[0],p=h[1];Object(x.useEffect)((function(){p.data&&(c(""),u(""),b(""),t("Password updated successfully"),setTimeout((function(){t("")}),1e4))}),[p.data]);return p.loading?Object(Z.jsx)("div",{children:"loading..."}):Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h2",{children:"User settings"}),Object(Z.jsx)(J.a,{onSubmit:function(e){e.preventDefault(),m({variables:{oldPassword:r,newPassword:o,confirmNew:j}})},children:Object(Z.jsxs)(J.a.Group,{children:[Object(Z.jsx)(J.a.Label,{children:"Old password:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"oldPassword",type:"password",value:r,onChange:function(e){var t=e.target;return c(t.value)}}),Object(Z.jsx)(J.a.Label,{children:"New password:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"newPassword",type:"password",value:o,onChange:function(e){var t=e.target;return u(t.value)}}),Object(Z.jsx)(J.a.Label,{children:"Confirm new password:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"confirmNew",type:"password",value:j,onChange:function(e){var t=e.target;return b(t.value)}}),Object(Z.jsx)(D.a,{className:"generalButton",id:"change-button",type:"submit",children:"submit"})]})})]})},ee=n(90),te=function(e){var t=e.user,n=e.setNotification,a=Object(x.useState)(""),r=Object(y.a)(a,2),c=r[0],s=r[1],i=Object(x.useState)(""),o=Object(y.a)(i,2),u=o[0],d=o[1],l=Object(x.useState)(""),j=Object(y.a)(l,2),b=j[0],O=j[1],h=Object(x.useState)(""),m=Object(y.a)(h,2),p=m[0],g=m[1],f=Object(x.useState)([]),v=Object(y.a)(f,2),w=v[0],S=v[1],C=Object(x.useState)(""),k=Object(y.a)(C,2),q=k[0],L=k[1],F=Object(N.useMutation)(M,{refetchQueries:[{query:A}],onError:function(e){n(e)}}),E=Object(y.a)(F,2),P=E[0],B=E[1];Object(x.useEffect)((function(){B.data&&(n("New product added successfully"),setTimeout((function(){n("")}),1e4),s(""),d(""),O(""),S([]),L(""))}),[B.data]);console.log(w);return"admin"!==t.role?null:Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h2",{children:"Add new product"}),w.map((function(e){return Object(Z.jsx)("div",{children:e},e)})),Object(Z.jsxs)(J.a,{onSubmit:function(e){e.preventDefault();var t=[].concat(Object(ee.a)(w),[p]);S(t),g("")},children:[Object(Z.jsx)(J.a.Label,{children:"categories:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"category",minLength:"2",type:"text",value:p,onChange:function(e){var t=e.target;return g(t.value)}}),Object(Z.jsx)(D.a,{className:"generalButton",id:"add-category",type:"submit",children:"add category"})]}),Object(Z.jsx)(J.a,{onSubmit:function(e){e.preventDefault(),P({variables:{name:c,price:u,quantity:b,categories:w,description:q}})},children:Object(Z.jsxs)(J.a.Group,{children:[Object(Z.jsx)(J.a.Label,{children:"Product name:"}),Object(Z.jsx)(J.a.Control,{className:"textField",minLength:"2",id:"name",required:!0,type:"text",value:c,onChange:function(e){var t=e.target;return s(t.value)}}),Object(Z.jsx)(J.a.Label,{children:"price:"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"price",required:!0,type:"number",step:"0.01",min:"0",value:u,onChange:function(e){var t=e.target;return d(parseFloat(t.value))}}),Object(Z.jsx)(J.a.Label,{children:"quantity:"}),Object(Z.jsx)(J.a.Control,{className:"textField",required:!0,id:"quantity",type:"number",min:"0",value:b,onChange:function(e){var t=e.target;return O(parseInt(t.value))}}),Object(Z.jsx)(J.a.Label,{children:"description (optional):"}),Object(Z.jsx)(J.a.Control,{className:"textField",id:"description",type:"text",value:q,onChange:function(e){var t=e.target;return L(t.value)}}),Object(Z.jsx)(D.a,{className:"generalButton",id:"submit-form",type:"submit",children:"submit"})]})})]})},ne=function(e){var t=e.logout,n=e.user,a={paddingRight:5};return localStorage.getItem("shop-user-token")?"admin"===n.role?Object(Z.jsxs)("div",{className:"menuBar",children:[Object(Z.jsx)(Y.b,{className:"menuLinkLogged",to:"/products",id:"products",style:a,children:"products"}),Object(Z.jsx)(Y.b,{className:"menuLinkLogged",to:"/shop-settings",id:"shop-settings",style:a,children:"manage inventory"}),Object(Z.jsx)(Y.b,{className:"menuLinkLogged",to:"/settings",id:"settings",style:a,children:"user settings"}),Object(Z.jsx)(Y.b,{className:"menuLinkLogged",to:"/",id:"logout",onClick:t,children:"logout"})]}):Object(Z.jsxs)("div",{className:"menuBar",children:[Object(Z.jsx)(Y.b,{className:"menuLinkLogged",to:"/products",id:"products",style:a,children:"products"}),Object(Z.jsx)(Y.b,{className:"menuLinkLogged",to:"/shopping-cart",id:"cart",style:a,children:"shopping cart"}),Object(Z.jsx)(Y.b,{className:"menuLinkLogged",to:"/settings",id:"settings",style:a,children:"user settings"}),Object(Z.jsx)(Y.b,{className:"menuLinkLogged",to:"/",id:"logout",onClick:t,children:"logout"})]}):Object(Z.jsxs)("div",{className:"menuBar",children:[Object(Z.jsx)(Y.b,{className:"menuLink",to:"/products",id:"products",style:a,children:"products"}),Object(Z.jsx)(Y.b,{className:"menuLink",to:"/login",id:"login",style:a,children:"login"}),Object(Z.jsx)(Y.b,{className:"menuLink",to:"/register",style:a,children:"register"})]})},ae="data:image/png;base64,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",re=n(114),ce=function(){var e=Object(x.useState)(""),t=Object(y.a)(e,2),n=(t[0],t[1]),a=Object(x.useState)(""),r=Object(y.a)(a,2),c=r[0],s=r[1],i=Object(N.useQuery)(k),o=Object(N.useMutation)(L,{refetchQueries:[{query:A}],onError:function(e){g(e)}}),u=Object(y.a)(o,2),d=(u[0],u[1],Object(N.useMutation)(E,{refetchQueries:[{query:A}],onError:function(e){g(e)}})),l=Object(y.a)(d,2),j=l[0],b=(l[1],Object(N.useApolloClient)()),O=Object(x.useState)([]),h=Object(y.a)(O,2),m=h[0],p=h[1];document.title="Pennywise Web Store";var g=function(e){n(e),setTimeout((function(){n("")}),1e4)};if(i.loading)return Object(Z.jsx)("div",{children:"loading..."});return localStorage.getItem("shop-user-token")?Object(Z.jsxs)("div",{className:"container",children:[Object(Z.jsxs)("div",{className:"header",children:[Object(Z.jsx)(re.a,{src:ae,className:"logoDetails"}),Object(Z.jsx)("h1",{children:"Pennywise Web Store"})]}),Object(Z.jsx)($,{message:c}),Object(Z.jsx)(ne,{logout:function(){localStorage.clear(),b.resetStore()},user:i.data.me}),Object(Z.jsxs)(V.c,{children:[Object(Z.jsx)(V.a,{path:"/shopping-cart",children:Object(Z.jsx)(X,{user:i.data.me,setNotification:s,setError:g})}),Object(Z.jsx)(V.a,{path:"/products",children:Object(Z.jsx)(K,{myCart:m,setMyCart:p,addToCart:function(e){var t=e.name,n=e.price;j({variables:{productName:t,price:n}}),s("Added ".concat(t," to cart")),setTimeout((function(){s("")}),5e3)},setError:g})}),Object(Z.jsx)(V.a,{path:"/settings",children:Object(Z.jsx)(_,{setNotification:s})}),Object(Z.jsx)(V.a,{path:"/shop-settings",children:Object(Z.jsx)(te,{user:i.data.me,setNotification:s})})]})]}):Object(Z.jsxs)("div",{className:"container",children:[Object(Z.jsxs)("div",{className:"header",children:[Object(Z.jsx)(re.a,{src:ae,className:"logoDetails"}),Object(Z.jsx)("h1",{children:"Pennywise Web Store"})]}),Object(Z.jsx)($,{message:c}),Object(Z.jsx)(ne,{}),Object(Z.jsxs)(V.c,{children:[Object(Z.jsx)(V.a,{path:"/login",children:Object(Z.jsx)(H,{setNotification:s})}),Object(Z.jsx)(V.a,{path:"/register",children:Object(Z.jsx)(W,{setNotification:s})}),Object(Z.jsx)(V.a,{path:"/products",children:Object(Z.jsx)(K,{})})]})]})},se=(n(110),n(69)),ie=n(88),oe=n(89),ue=[{request:{query:q,variables:{username:"Harri",password:"salainen",passwordConf:"salainen"}},result:{data:{createUser:{username:"Harri",password:"salainen",passwordConf:"salainen"}}}},{request:{query:S,variables:{username:"Harri",password:"salainen"}},result:{data:{login:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijc1NjFjNWE2LTc1NjYtNDA5Ny04NDUzLWM5MjU0NDE0ZTM5NyIsImVtYWlsIjoiaGVoZUBoZWhlLmZpIiwiaWF0IjoxNjIzNzY1NjkwLCJleHAiOjE2MjM3NjkyOTB9.WMQnhKrWbjqPxiieWsVMY4x5GA6pi91DM9zo5eo0GFY"}}}},{request:{query:k},result:{data:{me:{username:"Harri"}}}},{request:{query:C},result:{data:{allCategories:["electronics","clothing"]}}},{request:{query:A},result:{data:{allProducts:[{_typename:"Product",name:"Two sizes too big, faded Taz t-shirt",price:17.45,quantity:5,units_sold:0,average_grade:null,description:"Guaranteed to be ill-fitting",comments:[],categories:["clothing"],id:"ff28rj292fkfljf92"},{_typename:"Product",name:"Color TV",price:399.95,quantity:2,units_sold:0,average_grade:null,comments:[],categories:["electronics"],id:"ff28rj2929fjf92"}]}}},{request:{query:F,variables:{user:"Harri",product:"ff28rj292fkfljf92",content:"Oli ihan liian piukka",grade:2}},result:{data:{addComment:{user:"Harri",product:"ff28rj292fkfljf92",content:"Oli ihan liian piukka",grade:2}}}}],de=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENV,le=Object(oe.a)((function(e,t){var n=t.headers,a=localStorage.getItem("shop-user-token");return{headers:Object(se.a)(Object(se.a)({},n),{},{authorization:a?"bearer ".concat(a):null})}})),je=new N.HttpLink({uri:"/graphql"}),be=new N.ApolloClient({cache:new N.InMemoryCache,link:le.concat(je)}),Oe=function(e){var t=e.children;return"test"===de?Object(Z.jsx)(ie.a,{mocks:ue,defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}},children:Object(Z.jsx)(Z.Fragment,{children:t})}):Object(Z.jsx)(N.ApolloProvider,{client:be,children:Object(Z.jsx)(Z.Fragment,{children:t})})};v.a.render(Object(Z.jsx)(Oe,{children:Object(Z.jsx)(Y.a,{children:Object(Z.jsx)(ce,{})})}),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.019ea947.chunk.js.map